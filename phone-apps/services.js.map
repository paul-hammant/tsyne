{"version":3,"file":"services.js","sourceRoot":"","sources":["services.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Phone Services - Interfaces and Mock Implementations\n *\n * These services represent phone hardware and system capabilities.\n * Mock implementations allow apps to be developed and tested without\n * actual phone hardware.\n */\n\n// ============================================================================\n// Storage Service - Key-value persistence\n// ============================================================================\n\nexport interface IStorageService {\n  get(key: string): string | null;\n  set(key: string, value: string): void;\n  remove(key: string): void;\n  getAll(): Map<string, string>;\n  clear(): void;\n}\n\nexport class MockStorageService implements IStorageService {\n  private data: Map<string, string> = new Map();\n\n  get(key: string): string | null {\n    return this.data.get(key) ?? null;\n  }\n\n  set(key: string, value: string): void {\n    this.data.set(key, value);\n  }\n\n  remove(key: string): void {\n    this.data.delete(key);\n  }\n\n  getAll(): Map<string, string> {\n    return new Map(this.data);\n  }\n\n  clear(): void {\n    this.data.clear();\n  }\n}\n\n// ============================================================================\n// Contacts Service - Contact management\n// ============================================================================\n\nexport interface Contact {\n  id: string;\n  name: string;\n  phone: string;\n  email?: string;\n  favorite?: boolean;\n}\n\nexport interface IContactsService {\n  getAll(): Contact[];\n  getById(id: string): Contact | null;\n  search(query: string): Contact[];\n  add(contact: Omit<Contact, 'id'>): Contact;\n  update(id: string, contact: Partial<Contact>): Contact | null;\n  remove(id: string): boolean;\n  getFavorites(): Contact[];\n}\n\nexport class MockContactsService implements IContactsService {\n  private contacts: Map<string, Contact> = new Map();\n  private nextId = 1;\n\n  constructor() {\n    // Add some sample contacts\n    this.add({ name: 'Alice Smith', phone: '555-0101', email: 'alice@example.com', favorite: true });\n    this.add({ name: 'Bob Jones', phone: '555-0102', email: 'bob@example.com' });\n    this.add({ name: 'Carol White', phone: '555-0103' });\n    this.add({ name: 'David Brown', phone: '555-0104', favorite: true });\n    this.add({ name: 'Eve Davis', phone: '555-0105', email: 'eve@example.com' });\n  }\n\n  getAll(): Contact[] {\n    return Array.from(this.contacts.values()).sort((a, b) => a.name.localeCompare(b.name));\n  }\n\n  getById(id: string): Contact | null {\n    return this.contacts.get(id) ?? null;\n  }\n\n  search(query: string): Contact[] {\n    const lower = query.toLowerCase();\n    return this.getAll().filter(c =>\n      c.name.toLowerCase().includes(lower) ||\n      c.phone.includes(query) ||\n      (c.email && c.email.toLowerCase().includes(lower))\n    );\n  }\n\n  add(contact: Omit<Contact, 'id'>): Contact {\n    const id = `contact-${this.nextId++}`;\n    const newContact: Contact = { ...contact, id };\n    this.contacts.set(id, newContact);\n    return newContact;\n  }\n\n  update(id: string, updates: Partial<Contact>): Contact | null {\n    const existing = this.contacts.get(id);\n    if (!existing) return null;\n    const updated = { ...existing, ...updates, id };\n    this.contacts.set(id, updated);\n    return updated;\n  }\n\n  remove(id: string): boolean {\n    return this.contacts.delete(id);\n  }\n\n  getFavorites(): Contact[] {\n    return this.getAll().filter(c => c.favorite);\n  }\n}\n\n// ============================================================================\n// Telephony Service - Phone calls\n// ============================================================================\n\nexport interface CallLogEntry {\n  id: string;\n  number: string;\n  name?: string;\n  type: 'incoming' | 'outgoing' | 'missed';\n  timestamp: Date;\n  duration?: number; // seconds\n}\n\nexport interface ITelephonyService {\n  dial(number: string): Promise<boolean>;\n  hangup(): Promise<void>;\n  getCallLog(): CallLogEntry[];\n  clearCallLog(): void;\n  isInCall(): boolean;\n  getCurrentCallNumber(): string | null;\n}\n\nexport class MockTelephonyService implements ITelephonyService {\n  private callLog: CallLogEntry[] = [];\n  private inCall = false;\n  private currentNumber: string | null = null;\n  private nextId = 1;\n\n  constructor() {\n    // Add some sample call history\n    const now = new Date();\n    this.callLog = [\n      { id: 'call-1', number: '555-0101', name: 'Alice Smith', type: 'incoming', timestamp: new Date(now.getTime() - 3600000), duration: 120 },\n      { id: 'call-2', number: '555-0102', name: 'Bob Jones', type: 'outgoing', timestamp: new Date(now.getTime() - 7200000), duration: 45 },\n      { id: 'call-3', number: '555-9999', type: 'missed', timestamp: new Date(now.getTime() - 86400000) },\n    ];\n    this.nextId = 4;\n  }\n\n  async dial(number: string): Promise<boolean> {\n    if (this.inCall) return false;\n    this.inCall = true;\n    this.currentNumber = number;\n    console.log(`[MockTelephony] Dialing ${number}...`);\n\n    // Add to call log\n    this.callLog.unshift({\n      id: `call-${this.nextId++}`,\n      number,\n      type: 'outgoing',\n      timestamp: new Date(),\n    });\n\n    return true;\n  }\n\n  async hangup(): Promise<void> {\n    if (this.inCall) {\n      console.log(`[MockTelephony] Call ended with ${this.currentNumber}`);\n      this.inCall = false;\n      this.currentNumber = null;\n    }\n  }\n\n  getCallLog(): CallLogEntry[] {\n    return [...this.callLog];\n  }\n\n  clearCallLog(): void {\n    this.callLog = [];\n  }\n\n  isInCall(): boolean {\n    return this.inCall;\n  }\n\n  getCurrentCallNumber(): string | null {\n    return this.currentNumber;\n  }\n}\n\n// ============================================================================\n// Clock Service - Time and alarms\n// ============================================================================\n\nexport interface Alarm {\n  id: string;\n  time: string; // HH:MM format\n  label: string;\n  enabled: boolean;\n  days: number[]; // 0=Sun, 1=Mon, ..., 6=Sat (empty = one-time)\n}\n\nexport interface IClockService {\n  getCurrentTime(): Date;\n  getTimezone(): string;\n  getAlarms(): Alarm[];\n  addAlarm(alarm: Omit<Alarm, 'id'>): Alarm;\n  updateAlarm(id: string, alarm: Partial<Alarm>): Alarm | null;\n  removeAlarm(id: string): boolean;\n  toggleAlarm(id: string): Alarm | null;\n}\n\nexport class MockClockService implements IClockService {\n  private alarms: Map<string, Alarm> = new Map();\n  private nextId = 1;\n  private mockedTime: Date | null = null;\n\n  constructor() {\n    // Add sample alarms\n    this.addAlarm({ time: '07:00', label: 'Wake up', enabled: true, days: [1, 2, 3, 4, 5] });\n    this.addAlarm({ time: '08:30', label: 'Meeting', enabled: false, days: [] });\n  }\n\n  /** Set a fixed time for testing. Pass null to use real time. */\n  setTime(time: Date | null): void {\n    this.mockedTime = time;\n  }\n\n  getCurrentTime(): Date {\n    return this.mockedTime ?? new Date();\n  }\n\n  getTimezone(): string {\n    return Intl.DateTimeFormat().resolvedOptions().timeZone;\n  }\n\n  getAlarms(): Alarm[] {\n    return Array.from(this.alarms.values()).sort((a, b) => a.time.localeCompare(b.time));\n  }\n\n  addAlarm(alarm: Omit<Alarm, 'id'>): Alarm {\n    const id = `alarm-${this.nextId++}`;\n    const newAlarm: Alarm = { ...alarm, id };\n    this.alarms.set(id, newAlarm);\n    return newAlarm;\n  }\n\n  updateAlarm(id: string, updates: Partial<Alarm>): Alarm | null {\n    const existing = this.alarms.get(id);\n    if (!existing) return null;\n    const updated = { ...existing, ...updates, id };\n    this.alarms.set(id, updated);\n    return updated;\n  }\n\n  removeAlarm(id: string): boolean {\n    return this.alarms.delete(id);\n  }\n\n  toggleAlarm(id: string): Alarm | null {\n    const alarm = this.alarms.get(id);\n    if (!alarm) return null;\n    alarm.enabled = !alarm.enabled;\n    return alarm;\n  }\n}\n\n// ============================================================================\n// Notification Service - Local notifications\n// ============================================================================\n\nexport interface Notification {\n  id: string;\n  title: string;\n  body: string;\n  timestamp: Date;\n  read: boolean;\n}\n\nexport interface INotificationService {\n  send(title: string, body: string): Notification;\n  getAll(): Notification[];\n  getUnread(): Notification[];\n  markRead(id: string): void;\n  markAllRead(): void;\n  clear(): void;\n}\n\nexport class MockNotificationService implements INotificationService {\n  private notifications: Notification[] = [];\n  private nextId = 1;\n\n  send(title: string, body: string): Notification {\n    const notification: Notification = {\n      id: `notif-${this.nextId++}`,\n      title,\n      body,\n      timestamp: new Date(),\n      read: false,\n    };\n    this.notifications.unshift(notification);\n    console.log(`[MockNotification] ${title}: ${body}`);\n    return notification;\n  }\n\n  getAll(): Notification[] {\n    return [...this.notifications];\n  }\n\n  getUnread(): Notification[] {\n    return this.notifications.filter(n => !n.read);\n  }\n\n  markRead(id: string): void {\n    const notif = this.notifications.find(n => n.id === id);\n    if (notif) notif.read = true;\n  }\n\n  markAllRead(): void {\n    this.notifications.forEach(n => n.read = true);\n  }\n\n  clear(): void {\n    this.notifications = [];\n  }\n}\n\n// ============================================================================\n// Settings Service - System preferences\n// ============================================================================\n\nexport interface ISettingsService {\n  get<T>(key: string, defaultValue: T): T;\n  set<T>(key: string, value: T): void;\n  getTheme(): 'light' | 'dark' | 'system';\n  setTheme(theme: 'light' | 'dark' | 'system'): void;\n  getBrightness(): number;\n  setBrightness(level: number): void;\n  getVolume(): number;\n  setVolume(level: number): void;\n  isWifiEnabled(): boolean;\n  setWifiEnabled(enabled: boolean): void;\n  isBluetoothEnabled(): boolean;\n  setBluetoothEnabled(enabled: boolean): void;\n}\n\nexport class MockSettingsService implements ISettingsService {\n  private settings: Map<string, any> = new Map<string, any>([\n    ['theme', 'system'],\n    ['brightness', 80],\n    ['volume', 70],\n    ['wifi', true],\n    ['bluetooth', false],\n  ]);\n\n  get<T>(key: string, defaultValue: T): T {\n    return this.settings.has(key) ? this.settings.get(key) : defaultValue;\n  }\n\n  set<T>(key: string, value: T): void {\n    this.settings.set(key, value);\n  }\n\n  getTheme(): 'light' | 'dark' | 'system' {\n    return this.get('theme', 'system');\n  }\n\n  setTheme(theme: 'light' | 'dark' | 'system'): void {\n    this.set('theme', theme);\n  }\n\n  getBrightness(): number {\n    return this.get('brightness', 80);\n  }\n\n  setBrightness(level: number): void {\n    this.set('brightness', Math.max(0, Math.min(100, level)));\n  }\n\n  getVolume(): number {\n    return this.get('volume', 70);\n  }\n\n  setVolume(level: number): void {\n    this.set('volume', Math.max(0, Math.min(100, level)));\n  }\n\n  isWifiEnabled(): boolean {\n    return this.get('wifi', true);\n  }\n\n  setWifiEnabled(enabled: boolean): void {\n    this.set('wifi', enabled);\n  }\n\n  isBluetoothEnabled(): boolean {\n    return this.get('bluetooth', false);\n  }\n\n  setBluetoothEnabled(enabled: boolean): void {\n    this.set('bluetooth', enabled);\n  }\n}\n\n// ============================================================================\n// SMS Service - Text messaging\n// ============================================================================\n\nexport interface Message {\n  id: string;\n  threadId: string;\n  from: string;\n  to: string;\n  body: string;\n  timestamp: Date;\n  read: boolean;\n}\n\nexport interface Thread {\n  id: string;\n  contactNumber: string;\n  contactName?: string;\n  lastMessage: Message;\n  unreadCount: number;\n}\n\nexport type MessageListener = (message: Message) => void;\n\nexport interface ISMSService {\n  send(to: string, body: string): Promise<Message>;\n  getThreads(): Thread[];\n  getMessages(threadId: string): Message[];\n  markThreadRead(threadId: string): void;\n  deleteThread(threadId: string): boolean;\n  deleteMessage(messageId: string): boolean;\n  onMessageReceived(listener: MessageListener): () => void;\n  setAutoReply(enabled: boolean): void;\n}\n\n// ============================================================================\n// App Lifecycle Service - Controls how app closes behave\n// ============================================================================\n\n/**\n * App lifecycle service - handles app close behavior differently\n * depending on whether the app is running standalone or within the desktop.\n */\nexport interface IAppLifecycle {\n  /**\n   * Request the app to close. In standalone mode this quits the process.\n   * In desktop mode this just closes the inner window (handled by MDI).\n   */\n  requestClose(): void;\n}\n\n/**\n * Standalone lifecycle - calls app.quit() to exit the entire process\n */\nexport class StandaloneAppLifecycle implements IAppLifecycle {\n  constructor(private quitFn: () => void) {}\n\n  requestClose(): void {\n    this.quitFn();\n  }\n}\n\n/**\n * Desktop lifecycle - closes the inner window via callback\n * The callback is provided by desktop.ts to close the specific inner window\n */\nexport class DesktopAppLifecycle implements IAppLifecycle {\n  constructor(private closeCallback?: () => void) {}\n\n  requestClose(): void {\n    if (this.closeCallback) {\n      this.closeCallback();\n    }\n  }\n}\n\nexport class MockSMSService implements ISMSService {\n  private messages: Message[] = [];\n  private nextId = 1;\n  private listeners: MessageListener[] = [];\n  private autoReply = true;\n\n  // Simulated responses based on keywords\n  private static readonly RESPONSES: Record<string, string[]> = {\n    'hello': ['Hey there!', 'Hi! How are you?', 'Hello! üëã'],\n    'hi': ['Hey!', 'Hi! What\\'s up?', 'Hello!'],\n    'how are you': ['I\\'m doing great, thanks!', 'Pretty good! You?', 'Can\\'t complain üòä'],\n    'yes': ['Great!', 'Awesome!', 'Perfect üëç'],\n    'no': ['OK, no problem', 'That\\'s fine', 'Understood'],\n    'thanks': ['You\\'re welcome!', 'No problem!', 'Anytime!'],\n    'bye': ['See you later!', 'Goodbye!', 'Take care!'],\n    'ok': ['üëç', 'Sounds good', 'Cool'],\n    'default': ['Got it!', 'OK', 'I see', 'Interesting!', 'Tell me more', 'üëç', 'Sure thing'],\n  };\n\n  constructor() {\n    const now = new Date();\n    // Add some sample messages\n    this.messages = [\n      { id: 'msg-1', threadId: 'thread-555-0101', from: '555-0101', to: 'me', body: 'Hey, are you coming to the party?', timestamp: new Date(now.getTime() - 1800000), read: true },\n      { id: 'msg-2', threadId: 'thread-555-0101', from: 'me', to: '555-0101', body: 'Yes! See you at 8', timestamp: new Date(now.getTime() - 1700000), read: true },\n      { id: 'msg-3', threadId: 'thread-555-0102', from: '555-0102', to: 'me', body: 'Meeting moved to 3pm', timestamp: new Date(now.getTime() - 3600000), read: false },\n    ];\n    this.nextId = 4;\n  }\n\n  async send(to: string, body: string): Promise<Message> {\n    const threadId = `thread-${to}`;\n    const message: Message = {\n      id: `msg-${this.nextId++}`,\n      threadId,\n      from: 'me',\n      to,\n      body,\n      timestamp: new Date(),\n      read: true,\n    };\n    this.messages.push(message);\n    console.log(`[MockSMS] Sent to ${to}: ${body}`);\n\n    // Simulate a response after a delay if auto-reply is enabled\n    if (this.autoReply) {\n      this.scheduleAutoReply(to, body);\n    }\n\n    return message;\n  }\n\n  private scheduleAutoReply(from: string, originalMessage: string): void {\n    // Random delay between 1-4 seconds\n    const delay = 1000 + Math.random() * 3000;\n\n    setTimeout(() => {\n      const response = this.generateResponse(originalMessage);\n      this.receiveMessage(from, response);\n    }, delay);\n  }\n\n  private generateResponse(originalMessage: string): string {\n    const lower = originalMessage.toLowerCase();\n\n    // Check for keyword matches\n    for (const [keyword, responses] of Object.entries(MockSMSService.RESPONSES)) {\n      if (keyword !== 'default' && lower.includes(keyword)) {\n        return responses[Math.floor(Math.random() * responses.length)];\n      }\n    }\n\n    // Default response\n    const defaults = MockSMSService.RESPONSES['default'];\n    return defaults[Math.floor(Math.random() * defaults.length)];\n  }\n\n  private receiveMessage(from: string, body: string): void {\n    const threadId = `thread-${from}`;\n    const message: Message = {\n      id: `msg-${this.nextId++}`,\n      threadId,\n      from,\n      to: 'me',\n      body,\n      timestamp: new Date(),\n      read: false,\n    };\n    this.messages.push(message);\n    console.log(`[MockSMS] Received from ${from}: ${body}`);\n\n    // Notify listeners\n    this.listeners.forEach(listener => listener(message));\n  }\n\n  onMessageReceived(listener: MessageListener): () => void {\n    this.listeners.push(listener);\n    return () => {\n      const index = this.listeners.indexOf(listener);\n      if (index >= 0) this.listeners.splice(index, 1);\n    };\n  }\n\n  setAutoReply(enabled: boolean): void {\n    this.autoReply = enabled;\n  }\n\n  getThreads(): Thread[] {\n    const threadMap = new Map<string, Message[]>();\n\n    for (const msg of this.messages) {\n      const existing = threadMap.get(msg.threadId) || [];\n      existing.push(msg);\n      threadMap.set(msg.threadId, existing);\n    }\n\n    const threads: Thread[] = [];\n    for (const [threadId, msgs] of threadMap) {\n      const sorted = msgs.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());\n      const lastMsg = sorted[0];\n      const contactNumber = lastMsg.from === 'me' ? lastMsg.to : lastMsg.from;\n\n      threads.push({\n        id: threadId,\n        contactNumber,\n        lastMessage: lastMsg,\n        unreadCount: msgs.filter(m => !m.read && m.from !== 'me').length,\n      });\n    }\n\n    return threads.sort((a, b) => b.lastMessage.timestamp.getTime() - a.lastMessage.timestamp.getTime());\n  }\n\n  getMessages(threadId: string): Message[] {\n    return this.messages\n      .filter(m => m.threadId === threadId)\n      .sort((a, b) => a.timestamp.getTime() - b.timestamp.getTime());\n  }\n\n  markThreadRead(threadId: string): void {\n    this.messages\n      .filter(m => m.threadId === threadId)\n      .forEach(m => m.read = true);\n  }\n\n  deleteThread(threadId: string): boolean {\n    const before = this.messages.length;\n    this.messages = this.messages.filter(m => m.threadId !== threadId);\n    return this.messages.length < before;\n  }\n\n  deleteMessage(messageId: string): boolean {\n    const index = this.messages.findIndex(m => m.id === messageId);\n    if (index >= 0) {\n      this.messages.splice(index, 1);\n      return true;\n    }\n    return false;\n  }\n}\n"]}