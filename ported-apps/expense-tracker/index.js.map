{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * DimeApp Expense Tracker - Tsyne Port\n *\n * @tsyne-app:name Expense Tracker\n * @tsyne-app:icon confirm\n * @tsyne-app:category Finance\n * @tsyne-app:args (a: App) => void\n *\n * A personal finance tracker built in Tsyne showcasing:\n * - Expense tracking with categories\n * - Budget management and monitoring\n * - Recurring expense support\n * - Time-based filtering (today, month, all-time)\n * - Category-based analytics\n * - Dark mode support\n *\n * Portions copyright Rafael Soh and portions copyright Paul Hammant 2025\n */\n\n// ============================================================================\n// DATA MODELS\n// ============================================================================\n\nexport interface Expense {\n  id: string;\n  amount: number;\n  category: string;\n  description: string;\n  date: Date;\n  isRecurring: boolean;\n  recurringInterval?: 'daily' | 'weekly' | 'monthly' | 'yearly';\n}\n\nexport interface Budget {\n  id: string;\n  category: string;\n  limit: number;\n  period: 'monthly' | 'yearly';\n}\n\nexport interface Category {\n  name: string;\n  icon: string;\n  color: string;\n}\n\n// ============================================================================\n// EXPENSE TRACKER STORE (Observable)\n// ============================================================================\n\ntype ChangeListener = () => void;\n\nexport class ExpenseStore {\n  private expenses: Expense[] = [\n    {\n      id: 'exp-001',\n      amount: 45.99,\n      category: 'Groceries',\n      description: 'Weekly groceries',\n      date: new Date(Date.now() - 86400000), // Yesterday\n      isRecurring: false,\n    },\n    {\n      id: 'exp-002',\n      amount: 12.50,\n      category: 'Coffee',\n      description: 'Morning coffee',\n      date: new Date(Date.now() - 3600000), // 1 hour ago\n      isRecurring: true,\n      recurringInterval: 'daily',\n    },\n    {\n      id: 'exp-003',\n      amount: 120.00,\n      category: 'Transport',\n      description: 'Gas',\n      date: new Date(),\n      isRecurring: false,\n    },\n    {\n      id: 'exp-004',\n      amount: 89.99,\n      category: 'Entertainment',\n      description: 'Movie tickets',\n      date: new Date(),\n      isRecurring: false,\n    },\n  ];\n\n  private budgets: Budget[] = [\n    { id: 'budget-001', category: 'Groceries', limit: 300, period: 'monthly' },\n    { id: 'budget-002', category: 'Coffee', limit: 100, period: 'monthly' },\n    { id: 'budget-003', category: 'Transport', limit: 250, period: 'monthly' },\n    { id: 'budget-004', category: 'Entertainment', limit: 150, period: 'monthly' },\n  ];\n\n  private categories: Category[] = [\n    { name: 'Groceries', icon: 'ðŸ›’', color: '#4CAF50' },\n    { name: 'Coffee', icon: 'â˜•', color: '#8D6E63' },\n    { name: 'Transport', icon: 'ðŸš—', color: '#2196F3' },\n    { name: 'Entertainment', icon: 'ðŸŽ¬', color: '#9C27B0' },\n    { name: 'Healthcare', icon: 'ðŸ¥', color: '#F44336' },\n    { name: 'Utilities', icon: 'ðŸ’¡', color: '#FF9800' },\n    { name: 'Other', icon: 'ðŸ“Œ', color: '#607D8B' },\n  ];\n\n  private nextExpenseId = 5;\n  private changeListeners: ChangeListener[] = [];\n\n  subscribe(listener: ChangeListener): () => void {\n    this.changeListeners.push(listener);\n    return () => {\n      this.changeListeners = this.changeListeners.filter((l) => l !== listener);\n    };\n  }\n\n  private notifyChange() {\n    this.changeListeners.forEach((listener) => listener());\n  }\n\n  // ========== Expenses ==========\n  getExpenses(): Expense[] {\n    return [...this.expenses].sort((a, b) => b.date.getTime() - a.date.getTime());\n  }\n\n  getExpensesToday(): Expense[] {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    return this.expenses.filter((e) => {\n      const eDate = new Date(e.date);\n      eDate.setHours(0, 0, 0, 0);\n      return eDate.getTime() === today.getTime();\n    });\n  }\n\n  getExpensesThisMonth(): Expense[] {\n    const today = new Date();\n    const monthStart = new Date(today.getFullYear(), today.getMonth(), 1);\n    return this.expenses.filter((e) => e.date >= monthStart);\n  }\n\n  getExpensesByCategory(category: string): Expense[] {\n    return this.expenses.filter((e) => e.category === category);\n  }\n\n  addExpense(amount: number, category: string, description: string, isRecurring: boolean = false, interval?: 'daily' | 'weekly' | 'monthly' | 'yearly'): Expense {\n    const expense: Expense = {\n      id: `exp-${String(this.nextExpenseId++).padStart(3, '0')}`,\n      amount,\n      category,\n      description,\n      date: new Date(),\n      isRecurring,\n      recurringInterval: interval,\n    };\n    this.expenses.unshift(expense);\n    this.notifyChange();\n    return expense;\n  }\n\n  deleteExpense(expenseId: string) {\n    this.expenses = this.expenses.filter((e) => e.id !== expenseId);\n    this.notifyChange();\n  }\n\n  // ========== Budgets ==========\n  getBudgets(): Budget[] {\n    return [...this.budgets];\n  }\n\n  getBudgetForCategory(category: string): Budget | undefined {\n    return this.budgets.find((b) => b.category === category);\n  }\n\n  getBudgetStatus(category: string): { spent: number; limit: number; percentage: number } {\n    const budget = this.getBudgetForCategory(category);\n    const spent = this.getExpensesByCategory(category).reduce((sum, e) => sum + e.amount, 0);\n    if (!budget) {\n      return { spent, limit: 0, percentage: 0 };\n    }\n    return {\n      spent,\n      limit: budget.limit,\n      percentage: Math.round((spent / budget.limit) * 100),\n    };\n  }\n\n  updateBudget(category: string, limit: number) {\n    let budget = this.budgets.find((b) => b.category === category);\n    if (budget) {\n      budget.limit = limit;\n    } else {\n      this.budgets.push({\n        id: `budget-${Date.now()}`,\n        category,\n        limit,\n        period: 'monthly',\n      });\n    }\n    this.notifyChange();\n  }\n\n  // ========== Categories ==========\n  getCategories(): Category[] {\n    return [...this.categories];\n  }\n\n  getCategoryIcon(category: string): string {\n    return this.categories.find((c) => c.name === category)?.icon || 'ðŸ“Œ';\n  }\n\n  // ========== Analytics ==========\n  getTotalSpentToday(): number {\n    return this.getExpensesToday().reduce((sum, e) => sum + e.amount, 0);\n  }\n\n  getTotalSpentThisMonth(): number {\n    return this.getExpensesThisMonth().reduce((sum, e) => sum + e.amount, 0);\n  }\n\n  getTotalSpent(): number {\n    return this.expenses.reduce((sum, e) => sum + e.amount, 0);\n  }\n\n  getSpentByCategory(): Map<string, number> {\n    const map = new Map<string, number>();\n    for (const expense of this.expenses) {\n      const current = map.get(expense.category) || 0;\n      map.set(expense.category, current + expense.amount);\n    }\n    return map;\n  }\n\n  getRecurringExpenses(): Expense[] {\n    return this.expenses.filter((e) => e.isRecurring);\n  }\n\n  getMonthlyRecurringTotal(): number {\n    return this.getRecurringExpenses()\n      .filter((e) => e.recurringInterval === 'daily' || e.recurringInterval === 'monthly')\n      .reduce((sum, e) => sum + e.amount, 0);\n  }\n}\n\n// ============================================================================\n// VIEW BUILDER\n// ============================================================================\n\nexport function buildExpenseTrackerApp(a: any): void {\n  const store = new ExpenseStore();\n  let selectedTab: 'expenses' | 'budgets' | 'analytics' = 'expenses';\n\n  let expensesContainer: any;\n  let budgetsContainer: any;\n  let analyticsContainer: any;\n  let viewStack: any;\n  let totalTodayLabel: any;\n  let totalMonthLabel: any;\n\n  async function updateSummaryLabels() {\n    if (totalTodayLabel) {\n      await totalTodayLabel.setText(`Today: $${store.getTotalSpentToday().toFixed(2)}`);\n    }\n    if (totalMonthLabel) {\n      await totalMonthLabel.setText(`This Month: $${store.getTotalSpentThisMonth().toFixed(2)}`);\n    }\n  }\n\n  a.window({ title: 'Expense Tracker', width: 1000, height: 750 }, (win: any) => {\n    win.setContent(() => {\n      a.vbox(() => {\n        // Header with summary\n        a.hbox(() => {\n          a.vbox(() => {\n            a.label('ðŸ’° Expense Tracker').withId('app-title');\n            a.label('Personal Finance Management').withId('app-subtitle');\n          });\n          a.spacer();\n          totalTodayLabel = a.label('Today: $0.00', 'header-stat').withId('total-today');\n          a.spacer();\n          totalMonthLabel = a.label('This Month: $0.00', 'header-stat').withId('total-month');\n        });\n\n        a.separator();\n\n        // Tab navigation\n        a.hbox(() => {\n          a.button('ðŸ“Š Expenses')\n            .withId('tab-expenses')\n            .onClick(async () => {\n              selectedTab = 'expenses';\n              await viewStack.refresh();\n            });\n          a.button('ðŸ’³ Budgets')\n            .withId('tab-budgets')\n            .onClick(async () => {\n              selectedTab = 'budgets';\n              await viewStack.refresh();\n            });\n          a.button('ðŸ“ˆ Analytics')\n            .withId('tab-analytics')\n            .onClick(async () => {\n              selectedTab = 'analytics';\n              await viewStack.refresh();\n            });\n        });\n\n        a.separator();\n\n        // Content area\n        viewStack = a.vbox(() => {\n          // Expenses Tab\n          expensesContainer = a.vbox(() => {\n            a.label('Recent Expenses').withId('expenses-title');\n\n            a.hbox(() => {\n              a.button('âž• Add Expense')\n                .withId('btn-add-expense')\n                .onClick(async () => {\n                  const result = await win.showForm('New Expense', [\n                    { type: 'entry', label: 'Amount', key: 'amount' },\n                    {\n                      type: 'select',\n                      label: 'Category',\n                      key: 'category',\n                      options: store.getCategories().map((c) => c.name),\n                    },\n                    { type: 'entry', label: 'Description', key: 'description' },\n                    { type: 'check', label: 'Recurring?', key: 'recurring' },\n                  ]);\n\n                  if (result.submitted) {\n                    const amount = parseFloat(result.values.amount);\n                    if (!isNaN(amount)) {\n                      store.addExpense(\n                        amount,\n                        result.values.category,\n                        result.values.description,\n                        result.values.recurring === 'true'\n                      );\n                    }\n                  }\n                });\n\n              a.spacer();\n\n              a.button('Today Only').withId('filter-today').onClick(async () => {\n                const todayExpenses = store.getExpensesToday();\n                await win.showInfo('Today Expenses', `You have ${todayExpenses.length} expenses today`);\n              });\n\n              a.button('This Month').withId('filter-month').onClick(async () => {\n                const monthExpenses = store.getExpensesThisMonth();\n                await win.showInfo('Month Expenses', `You have ${monthExpenses.length} expenses this month`);\n              });\n            });\n\n            a.separator();\n\n            // Expenses list\n            a.vbox(() => {\n              // Empty state\n            })\n              .bindTo({\n                items: () => store.getExpenses(),\n                empty: () => {\n                  a.label('No expenses recorded');\n                },\n                render: (expense: Expense) => {\n                  const icon = store.getCategoryIcon(expense.category);\n                  a.hbox(() => {\n                    a.label(`${icon} ${expense.category}`, 'expense-category').withId(\n                      `exp-category-${expense.id}`\n                    );\n                    a.vbox(() => {\n                      a.label(expense.description).withId(`exp-desc-${expense.id}`);\n                      a.label(`${expense.date.toLocaleDateString()}`, 'expense-date').withId(\n                        `exp-date-${expense.id}`\n                      );\n                    });\n                    a.spacer();\n                    a.label(`$${expense.amount.toFixed(2)}`, 'expense-amount').withId(\n                      `exp-amount-${expense.id}`\n                    );\n                    a.button('âœ•')\n                      .withId(`btn-delete-${expense.id}`)\n                      .onClick(() => store.deleteExpense(expense.id));\n                  });\n                },\n                trackBy: (expense: Expense) => expense.id,\n              });\n          }).when(() => selectedTab === 'expenses');\n\n          // Budgets Tab\n          budgetsContainer = a.vbox(() => {\n            a.label('Budget Overview').withId('budgets-title');\n\n            a.hbox(() => {\n              a.button('âž• New Budget')\n                .withId('btn-new-budget')\n                .onClick(async () => {\n                  const result = await win.showForm('Set Budget', [\n                    {\n                      type: 'select',\n                      label: 'Category',\n                      key: 'category',\n                      options: store.getCategories().map((c) => c.name),\n                    },\n                    { type: 'entry', label: 'Monthly Limit', key: 'limit' },\n                  ]);\n\n                  if (result.submitted) {\n                    const limit = parseFloat(result.values.limit);\n                    if (!isNaN(limit)) {\n                      store.updateBudget(result.values.category, limit);\n                    }\n                  }\n                });\n            });\n\n            a.separator();\n\n            // Budget list\n            a.vbox(() => {\n              // Empty state\n            })\n              .bindTo({\n                items: () => store.getBudgets(),\n                empty: () => {\n                  a.label('No budgets set');\n                },\n                render: (budget: Budget) => {\n                  const status = store.getBudgetStatus(budget.category);\n                  const icon = store.getCategoryIcon(budget.category);\n                  const progressBar =\n                    'â–ˆ'.repeat(Math.min(status.percentage, 100) / 10) +\n                    'â–‘'.repeat(10 - Math.min(status.percentage, 100) / 10);\n\n                  a.hbox(() => {\n                    a.vbox(() => {\n                      a.label(`${icon} ${budget.category}`).withId(`budget-cat-${budget.id}`);\n                      a.label(progressBar).withId(`budget-bar-${budget.id}`);\n                      a.label(\n                        `$${status.spent.toFixed(2)} / $${status.limit.toFixed(2)} (${status.percentage}%)`\n                      ).withId(`budget-stats-${budget.id}`);\n                    });\n                  });\n                },\n                trackBy: (budget: Budget) => budget.id,\n              });\n          }).when(() => selectedTab === 'budgets');\n\n          // Analytics Tab\n          analyticsContainer = a.vbox(() => {\n            a.label('Spending Analytics').withId('analytics-title');\n\n            a.hbox(() => {\n              a.vbox(() => {\n                a.label('ðŸ“Œ Summary').withId('analytics-summary-label');\n                a.label(`Total Spent: $${store.getTotalSpent().toFixed(2)}`).withId(\n                  'analytics-total'\n                );\n                a.label(`This Month: $${store.getTotalSpentThisMonth().toFixed(2)}`).withId(\n                  'analytics-month'\n                );\n                a.label(\n                  `Monthly Recurring: $${store.getMonthlyRecurringTotal().toFixed(2)}`\n                ).withId('analytics-recurring');\n              });\n\n              a.spacer();\n\n              a.vbox(() => {\n                a.label('ðŸ“Š By Category').withId('analytics-category-label');\n                const spentByCategory = store.getSpentByCategory();\n                const entries = Array.from(spentByCategory.entries()).sort((a, b) => b[1] - a[1]);\n\n                entries.slice(0, 5).forEach(([category, amount]) => {\n                  const icon = store.getCategoryIcon(category);\n                  a.label(`${icon} ${category}: $${amount.toFixed(2)}`).withId(\n                    `analytics-cat-${category}`\n                  );\n                });\n              });\n            });\n\n            a.separator();\n\n            a.label('ðŸ”„ Recurring Expenses').withId('recurring-label');\n            a.vbox(() => {\n              // Empty state\n            })\n              .bindTo({\n                items: () => store.getRecurringExpenses(),\n                empty: () => {\n                  a.label('No recurring expenses');\n                },\n                render: (expense: Expense) => {\n                  const icon = store.getCategoryIcon(expense.category);\n                  a.hbox(() => {\n                    a.label(`${icon} ${expense.category}: $${expense.amount.toFixed(2)}`).withId(\n                      `recurring-exp-${expense.id}`\n                    );\n                    a.label(`(${expense.recurringInterval})`).withId(\n                      `recurring-interval-${expense.id}`\n                    );\n                  });\n                },\n                trackBy: (expense: Expense) => expense.id,\n              });\n          }).when(() => selectedTab === 'analytics');\n        });\n      });\n    });\n\n    // Subscribe to store changes\n    store.subscribe(async () => {\n      await updateSummaryLabels();\n      await viewStack.refresh();\n    });\n\n    // Initial setup\n    (async () => {\n      await updateSummaryLabels();\n    })();\n\n    win.show();\n  });\n}\n\nexport default buildExpenseTrackerApp;\n"]}