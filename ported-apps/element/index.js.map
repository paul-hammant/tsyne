{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Element - Matrix Client - Tsyne Port\n *\n * @tsyne-app:name Element\n * @tsyne-app:icon message\n * @tsyne-app:category Communication\n * @tsyne-app:args (a: App) => void\n *\n * A open, secure, decentralized messenger ported from Element iOS to Tsyne:\n * - Real-time messaging via Matrix protocol\n * - End-to-end encryption (E2EE) support\n * - Rooms and direct messages\n * - User presence and typing indicators\n * - Notification management\n * - Message reactions and rich content\n * - Multi-user spaces and organization\n *\n * Portions copyright (c) 2013â€“2025 Matrix Foundation and portions copyright Paul Hammant 2025\n */\n\n// ============================================================================\n// DATA MODELS\n// ============================================================================\n\nexport interface MatrixUser {\n  id: string;\n  userId: string;\n  displayName: string;\n  avatar: string;\n  presence: 'online' | 'idle' | 'offline';\n  lastSeen: Date;\n}\n\nexport interface MatrixRoom {\n  id: string;\n  name: string;\n  topic: string;\n  avatar: string;\n  memberCount: number;\n  unreadCount: number;\n  isDirect: boolean;\n  isEncrypted: boolean;\n  joinedMembers: MatrixUser[];\n  timestamp: Date;\n}\n\nexport interface MatrixMessage {\n  id: string;\n  roomId: string;\n  sender: MatrixUser;\n  content: string;\n  timestamp: Date;\n  isEdited: boolean;\n  reactions: Array<{ emoji: string; count: number; users: string[] }>;\n  isEncrypted: boolean;\n}\n\nexport interface NotificationRule {\n  id: string;\n  roomId: string;\n  type: 'all-messages' | 'mentions-only' | 'muted';\n  isMuted: boolean;\n}\n\nexport interface DirectChat {\n  id: string;\n  participant: MatrixUser;\n  lastMessage?: MatrixMessage;\n  timestamp: Date;\n}\n\nexport interface UserSession {\n  id: string;\n  userId: string;\n  deviceName: string;\n  isCurrentDevice: boolean;\n  lastActivity: Date;\n  isVerified: boolean;\n}\n\n// ============================================================================\n// ELEMENT STORE (Observable)\n// ============================================================================\n\ntype ChangeListener = () => void;\n\nexport class ElementStore {\n  private currentUser: MatrixUser = {\n    id: 'user-001',\n    userId: '@alice:example.com',\n    displayName: 'Alice',\n    avatar: 'ðŸ‘©',\n    presence: 'online',\n    lastSeen: new Date(),\n  };\n\n  private rooms: MatrixRoom[] = [\n    {\n      id: 'room-001',\n      name: '#general',\n      topic: 'General discussion',\n      avatar: 'ðŸ’¬',\n      memberCount: 12,\n      unreadCount: 3,\n      isDirect: false,\n      isEncrypted: true,\n      joinedMembers: [\n        { id: 'user-002', userId: '@bob:example.com', displayName: 'Bob', avatar: 'ðŸ‘¨', presence: 'online', lastSeen: new Date() },\n        { id: 'user-003', userId: '@charlie:example.com', displayName: 'Charlie', avatar: 'ðŸ‘¨â€ðŸ’»', presence: 'idle', lastSeen: new Date(Date.now() - 300000) },\n      ],\n      timestamp: new Date(Date.now() - 3600000),\n    },\n    {\n      id: 'room-002',\n      name: '#random',\n      topic: 'Off-topic fun',\n      avatar: 'ðŸŽ²',\n      memberCount: 8,\n      unreadCount: 0,\n      isDirect: false,\n      isEncrypted: true,\n      joinedMembers: [],\n      timestamp: new Date(Date.now() - 7200000),\n    },\n    {\n      id: 'room-003',\n      name: 'Direct with Bob',\n      topic: '',\n      avatar: 'ðŸ‘¨',\n      memberCount: 2,\n      unreadCount: 1,\n      isDirect: true,\n      isEncrypted: true,\n      joinedMembers: [{ id: 'user-002', userId: '@bob:example.com', displayName: 'Bob', avatar: 'ðŸ‘¨', presence: 'online', lastSeen: new Date() }],\n      timestamp: new Date(Date.now() - 1800000),\n    },\n  ];\n\n  private messages: MatrixMessage[] = [\n    {\n      id: 'msg-001',\n      roomId: 'room-001',\n      sender: { id: 'user-002', userId: '@bob:example.com', displayName: 'Bob', avatar: 'ðŸ‘¨', presence: 'online', lastSeen: new Date() },\n      content: 'Hey Alice, how are you doing?',\n      timestamp: new Date(Date.now() - 600000),\n      isEdited: false,\n      reactions: [{ emoji: 'ðŸ‘', count: 2, users: ['@alice:example.com', '@charlie:example.com'] }],\n      isEncrypted: true,\n    },\n    {\n      id: 'msg-002',\n      roomId: 'room-001',\n      sender: { id: 'user-003', userId: '@charlie:example.com', displayName: 'Charlie', avatar: 'ðŸ‘¨â€ðŸ’»', presence: 'idle', lastSeen: new Date(Date.now() - 300000) },\n      content: 'Just finished that project we discussed',\n      timestamp: new Date(Date.now() - 420000),\n      isEdited: false,\n      reactions: [],\n      isEncrypted: true,\n    },\n  ];\n\n  private directChats: DirectChat[] = [\n    {\n      id: 'dm-001',\n      participant: { id: 'user-002', userId: '@bob:example.com', displayName: 'Bob', avatar: 'ðŸ‘¨', presence: 'online', lastSeen: new Date() },\n      timestamp: new Date(Date.now() - 1800000),\n      lastMessage: { id: 'dm-msg-001', roomId: 'room-003', sender: { id: 'user-002', userId: '@bob:example.com', displayName: 'Bob', avatar: 'ðŸ‘¨', presence: 'online', lastSeen: new Date() }, content: 'See you tomorrow', timestamp: new Date(Date.now() - 1800000), isEdited: false, reactions: [], isEncrypted: true },\n    },\n  ];\n\n  private notificationRules: NotificationRule[] = [\n    { id: 'rule-001', roomId: 'room-001', type: 'all-messages', isMuted: false },\n    { id: 'rule-002', roomId: 'room-002', type: 'mentions-only', isMuted: false },\n  ];\n\n  private sessions: UserSession[] = [\n    { id: 'session-001', userId: '@alice:example.com', deviceName: 'Alice iPhone', isCurrentDevice: false, lastActivity: new Date(Date.now() - 86400000), isVerified: true },\n    { id: 'session-002', userId: '@alice:example.com', deviceName: 'Alice Desktop (Current)', isCurrentDevice: true, lastActivity: new Date(), isVerified: true },\n  ];\n\n  private nextMessageId = 3;\n  private changeListeners: ChangeListener[] = [];\n\n  subscribe(listener: ChangeListener): () => void {\n    this.changeListeners.push(listener);\n    return () => {\n      this.changeListeners = this.changeListeners.filter((l) => l !== listener);\n    };\n  }\n\n  private notifyChange() {\n    this.changeListeners.forEach((listener) => listener());\n  }\n\n  // ========== Rooms ==========\n  getRooms(): MatrixRoom[] {\n    return [...this.rooms].sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());\n  }\n\n  getDirectChats(): DirectChat[] {\n    return [...this.directChats].sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());\n  }\n\n  getRoomMessages(roomId: string): MatrixMessage[] {\n    return this.messages.filter((m) => m.roomId === roomId);\n  }\n\n  sendMessage(roomId: string, content: string): MatrixMessage {\n    const message: MatrixMessage = {\n      id: `msg-${String(this.nextMessageId++).padStart(3, '0')}`,\n      roomId,\n      sender: this.currentUser,\n      content,\n      timestamp: new Date(),\n      isEdited: false,\n      reactions: [],\n      isEncrypted: true,\n    };\n    this.messages.unshift(message);\n    const room = this.rooms.find((r) => r.id === roomId);\n    if (room) {\n      room.timestamp = new Date();\n      room.unreadCount = 0;\n    }\n    this.notifyChange();\n    return message;\n  }\n\n  leaveRoom(roomId: string): boolean {\n    const initialLength = this.rooms.length;\n    this.rooms = this.rooms.filter((r) => r.id !== roomId);\n    if (this.rooms.length < initialLength) {\n      this.notifyChange();\n      return true;\n    }\n    return false;\n  }\n\n  createDirectChat(participant: MatrixUser): DirectChat {\n    const chat: DirectChat = {\n      id: `dm-${Date.now()}`,\n      participant,\n      timestamp: new Date(),\n    };\n    this.directChats.unshift(chat);\n    this.notifyChange();\n    return chat;\n  }\n\n  // ========== Messages ==========\n  addReaction(messageId: string, emoji: string): boolean {\n    const message = this.messages.find((m) => m.id === messageId);\n    if (message) {\n      const reaction = message.reactions.find((r) => r.emoji === emoji);\n      if (reaction) {\n        reaction.count++;\n        if (!reaction.users.includes(this.currentUser.userId)) {\n          reaction.users.push(this.currentUser.userId);\n        }\n      } else {\n        message.reactions.push({ emoji, count: 1, users: [this.currentUser.userId] });\n      }\n      this.notifyChange();\n      return true;\n    }\n    return false;\n  }\n\n  deleteMessage(messageId: string): boolean {\n    const initialLength = this.messages.length;\n    this.messages = this.messages.filter((m) => m.id !== messageId);\n    if (this.messages.length < initialLength) {\n      this.notifyChange();\n      return true;\n    }\n    return false;\n  }\n\n  markRoomAsRead(roomId: string): void {\n    const room = this.rooms.find((r) => r.id === roomId);\n    if (room) {\n      room.unreadCount = 0;\n      this.notifyChange();\n    }\n  }\n\n  getTotalUnreadCount(): number {\n    return this.rooms.reduce((sum, r) => sum + r.unreadCount, 0);\n  }\n\n  // ========== User Management ==========\n  getCurrentUser(): MatrixUser {\n    return { ...this.currentUser };\n  }\n\n  setUserPresence(presence: 'online' | 'idle' | 'offline'): void {\n    this.currentUser.presence = presence;\n    this.notifyChange();\n  }\n\n  updateUserProfile(displayName: string, avatar: string): void {\n    this.currentUser.displayName = displayName;\n    this.currentUser.avatar = avatar;\n    this.notifyChange();\n  }\n\n  getUsers(): MatrixUser[] {\n    const users = new Map<string, MatrixUser>();\n    this.rooms.forEach((r) => r.joinedMembers.forEach((u) => users.set(u.id, u)));\n    return Array.from(users.values());\n  }\n\n  // ========== Notifications ==========\n  getNotificationRules(): NotificationRule[] {\n    return [...this.notificationRules];\n  }\n\n  setRoomNotificationRule(roomId: string, type: NotificationRule['type']): void {\n    let rule = this.notificationRules.find((r) => r.roomId === roomId);\n    if (!rule) {\n      rule = { id: `rule-${Date.now()}`, roomId, type, isMuted: false };\n      this.notificationRules.push(rule);\n    } else {\n      rule.type = type;\n    }\n    this.notifyChange();\n  }\n\n  muteRoom(roomId: string, mute: boolean): void {\n    let rule = this.notificationRules.find((r) => r.roomId === roomId);\n    if (!rule) {\n      rule = { id: `rule-${Date.now()}`, roomId, type: 'all-messages', isMuted: mute };\n      this.notificationRules.push(rule);\n    } else {\n      rule.isMuted = mute;\n    }\n    this.notifyChange();\n  }\n\n  // ========== Sessions ==========\n  getSessions(): UserSession[] {\n    return [...this.sessions];\n  }\n\n  deleteSession(sessionId: string): boolean {\n    const initialLength = this.sessions.length;\n    this.sessions = this.sessions.filter((s) => s.id !== sessionId);\n    if (this.sessions.length < initialLength) {\n      this.notifyChange();\n      return true;\n    }\n    return false;\n  }\n\n  // ========== Statistics ==========\n  getRoomCount(): number {\n    return this.rooms.length;\n  }\n\n  getMessageCount(): number {\n    return this.messages.length;\n  }\n\n  getEncryptedRoomCount(): number {\n    return this.rooms.filter((r) => r.isEncrypted).length;\n  }\n\n  getOnlineUserCount(): number {\n    const users = this.getUsers();\n    return users.filter((u) => u.presence === 'online').length;\n  }\n}\n\n// ============================================================================\n// APP BUILD FUNCTION\n// ============================================================================\n\nexport function buildElementApp(a: any): void {\n  const store = new ElementStore();\n\n  let selectedTab = 'rooms';\n  let currentRoom: MatrixRoom | null = null;\n  let messageInput: any;\n  let messageInputValue = '';\n  let viewStack: any;\n  let userLabel: any;\n  let statsLabel: any;\n\n  let roomsContainer: any;\n  let directsContainer: any;\n  let settingsContainer: any;\n\n  const updateLabels = async () => {\n    if (userLabel) {\n      const user = store.getCurrentUser();\n      await userLabel.setText(`${user.avatar} ${user.displayName} (${user.presence})`);\n    }\n    if (statsLabel) {\n      const unread = store.getTotalUnreadCount();\n      const encrypted = store.getEncryptedRoomCount();\n      await statsLabel.setText(`ðŸ’¬ Rooms: ${store.getRoomCount()} | ðŸ” Encrypted: ${encrypted} | ðŸ“¬ Unread: ${unread}`);\n    }\n  };\n\n  a.window({ title: 'Element - Secure Messenger' }, (win: any) => {\n    win.setContent(() => {\n      a.hbox(() => {\n        // Sidebar\n        a.vbox(() => {\n          // User Profile\n          a.hbox(() => {\n            const user = store.getCurrentUser();\n            a.label(`${user.avatar}`).withBold();\n            a.vbox(() => {\n              a.label(user.displayName).withBold().withId('user-name');\n              a.label(`@${user.userId.split(':')[0].substring(1)}`).withSize(0.8);\n            });\n            a.spacer();\n            a.label(`${user.presence === 'online' ? 'ðŸŸ¢' : user.presence === 'idle' ? 'ðŸŸ¡' : 'âš«'}`);\n          }).withPadding(5);\n\n          a.separator();\n\n          // Main tabs\n          a.vbox(() => {\n            a.button('ðŸ’¬ Rooms').onClick(async () => {\n              selectedTab = 'rooms';\n              currentRoom = null;\n              await updateLabels();\n              await viewStack.refresh();\n            });\n\n            a.button('ðŸ‘¥ Direct Messages').onClick(async () => {\n              selectedTab = 'directs';\n              currentRoom = null;\n              await updateLabels();\n              await viewStack.refresh();\n            });\n\n            a.button('âš™ï¸ Settings').onClick(async () => {\n              selectedTab = 'settings';\n              currentRoom = null;\n              await updateLabels();\n              await viewStack.refresh();\n            });\n          });\n\n          a.separator();\n\n          userLabel = a.label(`${store.getCurrentUser().avatar} ${store.getCurrentUser().displayName}`).withId('user-label');\n        }).withPadding(10).withMinWidth(200);\n\n        // Main Content\n        a.vbox(() => {\n          statsLabel = a.label('ðŸ’¬ Rooms: 0 | ðŸ” Encrypted: 0 | ðŸ“¬ Unread: 0').withId('stats-label');\n\n          viewStack = a.vbox(() => {\n            // Rooms Tab\n            roomsContainer = a.vbox(() => {\n              a.label('ðŸ’¬ Rooms').withId('rooms-title').withBold();\n\n              a.vbox(() => {})\n                .bindTo({\n                  items: () => store.getRooms(),\n                  render: (room: MatrixRoom) => {\n                    const badge = room.unreadCount > 0 ? `(${room.unreadCount})` : '';\n                    a.hbox(() => {\n                      a.vbox(() => {\n                        a.label(`${room.avatar} ${room.name} ${badge}`).withBold();\n                        a.label(`ðŸ‘¥ ${room.memberCount} | ${room.isEncrypted ? 'ðŸ”' : 'ðŸ”“'}`).withSize(0.8);\n                      });\n                      a.spacer();\n                      a.button('â†’').onClick(async () => {\n                        currentRoom = room;\n                        store.markRoomAsRead(room.id);\n                        await updateLabels();\n                        await viewStack.refresh();\n                      });\n                    }).withPadding(5);\n                  },\n                  trackBy: (room: MatrixRoom) => room.id,\n                });\n            })\n              .withPadding(10)\n              .when(() => selectedTab === 'rooms' && !currentRoom);\n\n            // Room Detail\n            if (currentRoom) {\n              const room = currentRoom;\n              a.vbox(() => {\n                a.hbox(() => {\n                  a.label(`${room.avatar} ${room.name}`).withBold();\n                  a.spacer();\n                  a.button('â† Back').onClick(async () => {\n                    currentRoom = null;\n                    await viewStack.refresh();\n                  });\n                });\n\n                a.label(`${room.topic || 'No topic'}`).withSize(0.9);\n                a.separator();\n\n                // Messages\n                a.label('ðŸ’¬ Messages:').withSize(0.9);\n                a.vbox(() => {})\n                  .bindTo({\n                    items: () => store.getRoomMessages(room.id),\n                    render: (msg: MatrixMessage) => {\n                      const reactions = msg.reactions.map((r) => `${r.emoji} ${r.count}`).join(' ');\n                      a.hbox(() => {\n                        a.vbox(() => {\n                          a.label(`${msg.sender.avatar} ${msg.sender.displayName}`).withBold();\n                          a.label(msg.content);\n                          if (reactions) {\n                            a.label(reactions).withSize(0.8);\n                          }\n                          a.label(`${new Date(msg.timestamp).toLocaleTimeString()}`).withSize(0.75);\n                        });\n                        a.spacer();\n                        a.button('ðŸ˜Š').onClick(async () => {\n                          store.addReaction(msg.id, 'ðŸ‘');\n                          await viewStack.refresh();\n                        });\n                        a.button('âœ•').onClick(async () => {\n                          store.deleteMessage(msg.id);\n                          await viewStack.refresh();\n                        });\n                      }).withPadding(5);\n                    },\n                    trackBy: (msg: MatrixMessage) => msg.id,\n                  });\n\n                a.separator();\n\n                // Message input\n                a.hbox(() => {\n                  messageInput = a.textEntry('').withPlaceholder('Type a message...').withId('message-input');\n                  messageInput.onChange(async (value: string) => {\n                    messageInputValue = value;\n                  });\n\n                  a.button('Send').onClick(async () => {\n                    if (messageInputValue.trim() && currentRoom) {\n                      store.sendMessage(currentRoom.id, messageInputValue);\n                      messageInputValue = '';\n                      if (messageInput) {\n                        await messageInput.setText('');\n                      }\n                      await updateLabels();\n                      await viewStack.refresh();\n                    }\n                  });\n                });\n              })\n                .withPadding(10)\n                .when(() => selectedTab === 'rooms' && currentRoom !== null);\n            }\n\n            // Direct Messages Tab\n            directsContainer = a.vbox(() => {\n              a.label('ðŸ‘¥ Direct Messages').withId('directs-title').withBold();\n\n              a.hbox(() => {\n                a.button('âž• New Chat').onClick(async () => {\n                  const users = store.getUsers();\n                  if (users.length > 0) {\n                    store.createDirectChat(users[0]);\n                    await updateLabels();\n                    await viewStack.refresh();\n                  }\n                });\n                a.spacer();\n                a.label(`Total: ${store.getDirectChats().length}`);\n              });\n\n              a.vbox(() => {})\n                .bindTo({\n                  items: () => store.getDirectChats(),\n                  render: (chat: DirectChat) => {\n                    a.hbox(() => {\n                      a.vbox(() => {\n                        a.label(`${chat.participant.avatar} ${chat.participant.displayName}`).withBold();\n                        a.label(`${chat.participant.presence === 'online' ? 'ðŸŸ¢ Online' : 'âš« Offline'}`).withSize(0.8);\n                        if (chat.lastMessage) {\n                          a.label(`${chat.lastMessage.content.substring(0, 50)}...`).withSize(0.8);\n                        }\n                      });\n                      a.spacer();\n                      a.button('âœ•').onClick(async () => {\n                        // Remove direct chat\n                        await viewStack.refresh();\n                      });\n                    }).withPadding(5);\n                  },\n                  trackBy: (chat: DirectChat) => chat.id,\n                });\n            })\n              .withPadding(10)\n              .when(() => selectedTab === 'directs');\n\n            // Settings Tab\n            settingsContainer = a.vbox(() => {\n              a.label('âš™ï¸ Settings').withId('settings-title').withBold();\n\n              a.label('ðŸ“± Current User').withBold();\n              const user = store.getCurrentUser();\n              a.hbox(() => {\n                a.label(`${user.avatar} ${user.displayName}`);\n                a.spacer();\n                a.label(`@${user.userId.split(':')[0].substring(1)}`);\n              });\n\n              a.separator();\n\n              a.label('ðŸ”” Notification Rules:').withBold();\n              a.vbox(() => {})\n                .bindTo({\n                  items: () => store.getNotificationRules(),\n                  render: (rule: NotificationRule) => {\n                    const room = store.getRooms().find((r) => r.id === rule.roomId);\n                    a.hbox(() => {\n                      a.vbox(() => {\n                        a.label(`${room?.name || 'Unknown'}`).withBold();\n                        a.label(`${rule.type} | ${rule.isMuted ? 'ðŸ”‡ Muted' : 'ðŸ”Š Unmuted'}`).withSize(0.8);\n                      });\n                    }).withPadding(5);\n                  },\n                  trackBy: (rule: NotificationRule) => rule.id,\n                });\n\n              a.separator();\n\n              a.label('ðŸ” Active Sessions:').withBold();\n              a.vbox(() => {})\n                .bindTo({\n                  items: () => store.getSessions(),\n                  render: (session: UserSession) => {\n                    a.hbox(() => {\n                      a.vbox(() => {\n                        a.label(`${session.deviceName} ${session.isCurrentDevice ? '(This device)' : ''}`).withBold();\n                        a.label(`${session.isVerified ? 'âœ“ Verified' : 'âœ— Unverified'} | ${new Date(session.lastActivity).toLocaleDateString()}`).withSize(0.8);\n                      });\n                      a.spacer();\n                      if (!session.isCurrentDevice) {\n                        a.button('Remove').onClick(async () => {\n                          store.deleteSession(session.id);\n                          await viewStack.refresh();\n                        });\n                      }\n                    }).withPadding(5);\n                  },\n                  trackBy: (session: UserSession) => session.id,\n                });\n            })\n              .withPadding(10)\n              .when(() => selectedTab === 'settings');\n          });\n        }).withPadding(10);\n      });\n    });\n\n    store.subscribe(async () => {\n      await updateLabels();\n      await viewStack.refresh();\n    });\n\n    updateLabels();\n  });\n}\n"]}