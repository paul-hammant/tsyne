{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Ebook Reader - Tsyne Port of FlutterEbookApp\n *\n * A simple ebook library manager with reading tracking, favorites,\n * and customizable reading preferences. Demonstrates Observable MVC pattern.\n *\n * @tsyne-app {\"name\": \"Ebook Reader\", \"version\": \"1.0.0\"}\n */\n\n// Data Models\ninterface Ebook {\n  id: string;\n  title: string;\n  author: string;\n  description: string;\n  coverEmoji: string;\n  downloadProgress: number; // 0-100\n  isDownloaded: boolean;\n  isFavorite: boolean;\n  lastReadPosition: number; // 0-100 (percentage)\n  fileSize: number; // in MB\n  format: 'EPUB' | 'PDF' | 'MOBI';\n  publicationDate: string;\n  totalPages: number;\n  currentPage: number;\n}\n\ninterface Bookmark {\n  id: string;\n  ebookId: string;\n  pageNumber: number;\n  note: string;\n  createdAt: Date;\n}\n\ninterface ReadingStats {\n  ebookId: string;\n  totalReadTime: number; // in minutes\n  lastReadDate: Date;\n  sessionCount: number;\n}\n\ninterface ReadingPreferences {\n  theme: 'light' | 'dark';\n  fontSize: 'small' | 'medium' | 'large';\n  fontFamily: 'serif' | 'sans-serif';\n  lineSpacing: 'normal' | 'relaxed' | 'loose';\n}\n\ntype ChangeListener = () => void;\n\n// Observable Store\nclass EbookStore {\n  private books: Ebook[] = [];\n  private bookmarks: Bookmark[] = [];\n  private readingStats: ReadingStats[] = [];\n  private preferences: ReadingPreferences = {\n    theme: 'light',\n    fontSize: 'medium',\n    fontFamily: 'serif',\n    lineSpacing: 'normal',\n  };\n  private currentlyReading: string | null = null;\n  private changeListeners: ChangeListener[] = [];\n  private nextBookId = 13;\n  private nextBookmarkId = 5;\n\n  constructor() {\n    this.initializeBooks();\n  }\n\n  private initializeBooks() {\n    this.books = [\n      {\n        id: 'book-001',\n        title: 'Pride and Prejudice',\n        author: 'Jane Austen',\n        description: 'A romantic novel of manners and marriage set in Georgian England.',\n        coverEmoji: 'ðŸ“•',\n        downloadProgress: 100,\n        isDownloaded: true,\n        isFavorite: false,\n        lastReadPosition: 45,\n        fileSize: 2.3,\n        format: 'EPUB',\n        publicationDate: '1813-01-28',\n        totalPages: 432,\n        currentPage: 194,\n      },\n      {\n        id: 'book-002',\n        title: 'Wuthering Heights',\n        author: 'Emily BrontÃ«',\n        description: 'A tale of passionate love and vengeance on the Yorkshire moors.',\n        coverEmoji: 'ðŸ“—',\n        downloadProgress: 100,\n        isDownloaded: true,\n        isFavorite: true,\n        lastReadPosition: 62,\n        fileSize: 1.8,\n        format: 'EPUB',\n        publicationDate: '1847-12-19',\n        totalPages: 352,\n        currentPage: 218,\n      },\n      {\n        id: 'book-003',\n        title: 'The Great Gatsby',\n        author: 'F. Scott Fitzgerald',\n        description: 'A novel of the Jazz Age that has been acclaimed by generations of readers.',\n        coverEmoji: 'ðŸ“˜',\n        downloadProgress: 75,\n        isDownloaded: false,\n        isFavorite: false,\n        lastReadPosition: 0,\n        fileSize: 1.2,\n        format: 'EPUB',\n        publicationDate: '1925-04-10',\n        totalPages: 180,\n        currentPage: 0,\n      },\n      {\n        id: 'book-004',\n        title: 'Jane Eyre',\n        author: 'Charlotte BrontÃ«',\n        description: 'An autobiography of a young woman discovering her place in the world.',\n        coverEmoji: 'ðŸ“™',\n        downloadProgress: 100,\n        isDownloaded: true,\n        isFavorite: true,\n        lastReadPosition: 78,\n        fileSize: 2.1,\n        format: 'EPUB',\n        publicationDate: '1847-10-16',\n        totalPages: 507,\n        currentPage: 395,\n      },\n      {\n        id: 'book-005',\n        title: 'Moby Dick',\n        author: 'Herman Melville',\n        description: 'An epic tale of man versus nature on the high seas.',\n        coverEmoji: 'ðŸ““',\n        downloadProgress: 50,\n        isDownloaded: false,\n        isFavorite: false,\n        lastReadPosition: 0,\n        fileSize: 2.8,\n        format: 'EPUB',\n        publicationDate: '1851-10-18',\n        totalPages: 635,\n        currentPage: 0,\n      },\n      {\n        id: 'book-006',\n        title: 'The Odyssey',\n        author: 'Homer',\n        description: 'An ancient Greek epic of adventure, heroism, and the journey home.',\n        coverEmoji: 'ðŸ“•',\n        downloadProgress: 100,\n        isDownloaded: true,\n        isFavorite: false,\n        lastReadPosition: 33,\n        fileSize: 1.6,\n        format: 'EPUB',\n        publicationDate: '800 BC',\n        totalPages: 425,\n        currentPage: 140,\n      },\n      {\n        id: 'book-007',\n        title: 'Frankenstein',\n        author: 'Mary Shelley',\n        description: 'A gothic novel about the dangers of unchecked ambition and science.',\n        coverEmoji: 'ðŸ“—',\n        downloadProgress: 100,\n        isDownloaded: true,\n        isFavorite: true,\n        lastReadPosition: 55,\n        fileSize: 1.4,\n        format: 'EPUB',\n        publicationDate: '1818-01-01',\n        totalPages: 280,\n        currentPage: 154,\n      },\n      {\n        id: 'book-008',\n        title: 'The Picture of Dorian Gray',\n        author: 'Oscar Wilde',\n        description: 'A novel about beauty, corruption, and the consequences of vanity.',\n        coverEmoji: 'ðŸ“˜',\n        downloadProgress: 25,\n        isDownloaded: false,\n        isFavorite: false,\n        lastReadPosition: 0,\n        fileSize: 0.9,\n        format: 'EPUB',\n        publicationDate: '1890-07-01',\n        totalPages: 254,\n        currentPage: 0,\n      },\n      {\n        id: 'book-009',\n        title: '1984',\n        author: 'George Orwell',\n        description: 'A dystopian novel set in a totalitarian superstate.',\n        coverEmoji: 'ðŸ“™',\n        downloadProgress: 100,\n        isDownloaded: true,\n        isFavorite: false,\n        lastReadPosition: 88,\n        fileSize: 2.2,\n        format: 'EPUB',\n        publicationDate: '1949-06-08',\n        totalPages: 328,\n        currentPage: 288,\n      },\n      {\n        id: 'book-010',\n        title: 'The Count of Monte Cristo',\n        author: 'Alexandre Dumas',\n        description: 'An adventure novel about revenge, forgiveness, and redemption.',\n        coverEmoji: 'ðŸ““',\n        downloadProgress: 90,\n        isDownloaded: false,\n        isFavorite: true,\n        lastReadPosition: 0,\n        fileSize: 3.1,\n        format: 'EPUB',\n        publicationDate: '1844-08-28',\n        totalPages: 928,\n        currentPage: 0,\n      },\n      {\n        id: 'book-011',\n        title: 'Alice in Wonderland',\n        author: 'Lewis Carroll',\n        description: 'A whimsical tale of a young girl in a magical realm.',\n        coverEmoji: 'ðŸ“•',\n        downloadProgress: 100,\n        isDownloaded: true,\n        isFavorite: false,\n        lastReadPosition: 92,\n        fileSize: 1.5,\n        format: 'EPUB',\n        publicationDate: '1865-11-26',\n        totalPages: 196,\n        currentPage: 180,\n      },\n      {\n        id: 'book-012',\n        title: 'The Hobbit',\n        author: 'J.R.R. Tolkien',\n        description: 'A fantasy adventure about an unlikely hero and his quest.',\n        coverEmoji: 'ðŸ“—',\n        downloadProgress: 100,\n        isDownloaded: true,\n        isFavorite: true,\n        lastReadPosition: 71,\n        fileSize: 2.4,\n        format: 'EPUB',\n        publicationDate: '1937-09-21',\n        totalPages: 310,\n        currentPage: 220,\n      },\n    ];\n\n    this.bookmarks = [\n      {\n        id: 'bm-001',\n        ebookId: 'book-001',\n        pageNumber: 100,\n        note: 'Important dialogue about marriage',\n        createdAt: new Date(2025, 0, 10),\n      },\n      {\n        id: 'bm-002',\n        ebookId: 'book-002',\n        pageNumber: 156,\n        note: 'Emotional scene',\n        createdAt: new Date(2025, 0, 15),\n      },\n      {\n        id: 'bm-003',\n        ebookId: 'book-004',\n        pageNumber: 250,\n        note: 'Character development turning point',\n        createdAt: new Date(2025, 0, 18),\n      },\n      {\n        id: 'bm-004',\n        ebookId: 'book-007',\n        pageNumber: 145,\n        note: 'Key plot twist',\n        createdAt: new Date(2025, 0, 20),\n      },\n    ];\n\n    this.readingStats = [\n      { ebookId: 'book-001', totalReadTime: 450, lastReadDate: new Date(), sessionCount: 15 },\n      { ebookId: 'book-002', totalReadTime: 620, lastReadDate: new Date(), sessionCount: 22 },\n      { ebookId: 'book-004', totalReadTime: 890, lastReadDate: new Date(), sessionCount: 35 },\n      { ebookId: 'book-006', totalReadTime: 320, lastReadDate: new Date(), sessionCount: 12 },\n      { ebookId: 'book-007', totalReadTime: 410, lastReadDate: new Date(), sessionCount: 18 },\n      { ebookId: 'book-009', totalReadTime: 560, lastReadDate: new Date(), sessionCount: 28 },\n      { ebookId: 'book-011', totalReadTime: 540, lastReadDate: new Date(), sessionCount: 20 },\n      { ebookId: 'book-012', totalReadTime: 780, lastReadDate: new Date(), sessionCount: 32 },\n    ];\n\n    this.currentlyReading = 'book-001';\n  }\n\n  // Book Management\n  getBooks(): Ebook[] {\n    return [...this.books];\n  }\n\n  getBookCount(): number {\n    return this.books.length;\n  }\n\n  getBookById(id: string): Ebook | undefined {\n    return this.books.find((b) => b.id === id);\n  }\n\n  searchBooks(query: string): Ebook[] {\n    const lower = query.toLowerCase();\n    return this.books.filter(\n      (b) =>\n        b.title.toLowerCase().includes(lower) ||\n        b.author.toLowerCase().includes(lower) ||\n        b.description.toLowerCase().includes(lower)\n    );\n  }\n\n  addBook(book: Omit<Ebook, 'id'>): Ebook {\n    const newBook: Ebook = {\n      ...book,\n      id: `book-${String(this.nextBookId++).padStart(3, '0')}`,\n    };\n    this.books.push(newBook);\n    this.notifyChange();\n    return newBook;\n  }\n\n  deleteBook(id: string): boolean {\n    const index = this.books.findIndex((b) => b.id === id);\n    if (index === -1) return false;\n    this.books.splice(index, 1);\n    if (this.currentlyReading === id) {\n      this.currentlyReading = null;\n    }\n    this.notifyChange();\n    return true;\n  }\n\n  getDownloadedBooks(): Ebook[] {\n    return [...this.books.filter((b) => b.isDownloaded)];\n  }\n\n  getDownloadedCount(): number {\n    return this.books.filter((b) => b.isDownloaded).length;\n  }\n\n  // Favorite Management\n  getFavorites(): Ebook[] {\n    return [...this.books.filter((b) => b.isFavorite)];\n  }\n\n  getFavoriteCount(): number {\n    return this.books.filter((b) => b.isFavorite).length;\n  }\n\n  toggleFavorite(id: string): boolean {\n    const book = this.books.find((b) => b.id === id);\n    if (!book) return false;\n    book.isFavorite = !book.isFavorite;\n    this.notifyChange();\n    return true;\n  }\n\n  // Download Management\n  startDownload(id: string): boolean {\n    const book = this.books.find((b) => b.id === id);\n    if (!book) return false;\n    if (book.isDownloaded) return false;\n\n    book.downloadProgress = 10;\n    this.simulateDownload(id);\n    this.notifyChange();\n    return true;\n  }\n\n  private simulateDownload(id: string) {\n    const book = this.books.find((b) => b.id === id);\n    if (!book) return;\n\n    const interval = setInterval(() => {\n      if (book.downloadProgress >= 100) {\n        book.isDownloaded = true;\n        book.downloadProgress = 100;\n        clearInterval(interval);\n        this.notifyChange();\n      } else {\n        book.downloadProgress = Math.min(100, book.downloadProgress + Math.random() * 20);\n        this.notifyChange();\n      }\n    }, 500);\n  }\n\n  cancelDownload(id: string): boolean {\n    const book = this.books.find((b) => b.id === id);\n    if (!book || book.isDownloaded) return false;\n    book.downloadProgress = 0;\n    this.notifyChange();\n    return true;\n  }\n\n  // Reading Progress\n  getCurrentlyReading(): string | null {\n    return this.currentlyReading;\n  }\n\n  setCurrentlyReading(id: string | null): boolean {\n    if (id === null) {\n      this.currentlyReading = null;\n      this.notifyChange();\n      return true;\n    }\n    if (!this.books.find((b) => b.id === id)) return false;\n    this.currentlyReading = id;\n    this.notifyChange();\n    return true;\n  }\n\n  updateReadingProgress(id: string, page: number, percentage: number): boolean {\n    const book = this.books.find((b) => b.id === id);\n    if (!book) return false;\n    book.currentPage = Math.min(page, book.totalPages);\n    book.lastReadPosition = Math.min(Math.max(percentage, 0), 100);\n    this.currentlyReading = id;\n\n    let stats = this.readingStats.find((s) => s.ebookId === id);\n    if (!stats) {\n      stats = { ebookId: id, totalReadTime: 0, lastReadDate: new Date(), sessionCount: 0 };\n      this.readingStats.push(stats);\n    }\n    stats.lastReadDate = new Date();\n    stats.sessionCount++;\n\n    this.notifyChange();\n    return true;\n  }\n\n  getReadingStats(id: string): ReadingStats | undefined {\n    return this.readingStats.find((s) => s.ebookId === id);\n  }\n\n  getTotalReadTime(id: string): number {\n    return this.readingStats.find((s) => s.ebookId === id)?.totalReadTime || 0;\n  }\n\n  // Bookmarks\n  getBookmarks(ebookId: string): Bookmark[] {\n    return [...this.bookmarks.filter((b) => b.ebookId === ebookId)];\n  }\n\n  getBookmarkCount(): number {\n    return this.bookmarks.length;\n  }\n\n  addBookmark(ebookId: string, pageNumber: number, note: string): Bookmark {\n    const bookmark: Bookmark = {\n      id: `bm-${String(this.nextBookmarkId++).padStart(3, '0')}`,\n      ebookId,\n      pageNumber,\n      note,\n      createdAt: new Date(),\n    };\n    this.bookmarks.push(bookmark);\n    this.notifyChange();\n    return bookmark;\n  }\n\n  deleteBookmark(id: string): boolean {\n    const index = this.bookmarks.findIndex((b) => b.id === id);\n    if (index === -1) return false;\n    this.bookmarks.splice(index, 1);\n    this.notifyChange();\n    return true;\n  }\n\n  // Preferences\n  getPreferences(): ReadingPreferences {\n    return { ...this.preferences };\n  }\n\n  setTheme(theme: 'light' | 'dark'): void {\n    this.preferences.theme = theme;\n    this.notifyChange();\n  }\n\n  setFontSize(size: 'small' | 'medium' | 'large'): void {\n    this.preferences.fontSize = size;\n    this.notifyChange();\n  }\n\n  setFontFamily(family: 'serif' | 'sans-serif'): void {\n    this.preferences.fontFamily = family;\n    this.notifyChange();\n  }\n\n  setLineSpacing(spacing: 'normal' | 'relaxed' | 'loose'): void {\n    this.preferences.lineSpacing = spacing;\n    this.notifyChange();\n  }\n\n  // Observable Pattern\n  subscribe(listener: ChangeListener): () => void {\n    this.changeListeners.push(listener);\n    return () => {\n      this.changeListeners = this.changeListeners.filter((l) => l !== listener);\n    };\n  }\n\n  private notifyChange() {\n    this.changeListeners.forEach((listener) => listener());\n  }\n}\n\n// UI Builder\nexport async function buildEbookApp(app: any) {\n  const a = app.getAppBuilder();\n  const store = new EbookStore();\n  let selectedTab = 'library';\n\n  const updateLabels = async () => {\n    const currentPrefs = store.getPreferences();\n    const downloaded = store.getDownloadedBooks();\n    const favoriteCount = store.getFavoriteCount();\n    const bookmarkCount = store.getBookmarkCount();\n\n    if (userLabel) {\n      userLabel.setText(\n        `ðŸ“š Ebook Reader | Theme: ${currentPrefs.theme === 'dark' ? 'ðŸŒ™' : 'â˜€ï¸'} | Font: ${currentPrefs.fontSize}`\n      );\n    }\n\n    if (statsLabel) {\n      statsLabel.setText(\n        `Total: ${store.getBookCount()} | Downloaded: ${downloaded.length} | Favorites: ${favoriteCount} | Bookmarks: ${bookmarkCount}`\n      );\n    }\n  };\n\n  let userLabel: any;\n  let statsLabel: any;\n\n  const libraryContainer = a\n    .vbox(() => {\n      userLabel = a\n        .label(() => 'ðŸ“š Ebook Reader')\n        .withId('user-label');\n\n      a.label(() => 'Library').withBold().withId('library-title');\n\n      a.entry()\n        .withPlaceholder('Search books...')\n        .onChange(async (query: string) => {\n          await updateLabels();\n          await viewStack.refresh();\n        });\n\n      a.vbox(() => {})\n        .withId('books-list')\n        .bindTo({\n          items: () => store.getBooks(),\n          render: (book: Ebook) => {\n            return a.hbox(() => {\n              a.label(() => book.coverEmoji);\n              a.vbox(() => {\n                a.label(() => book.title).withBold().withId(`book-title-${book.id}`);\n                a.label(() => `by ${book.author}`).withId(`book-author-${book.id}`);\n\n                if (book.downloadProgress < 100) {\n                  a.label(() => `â¬‡ï¸ ${Math.round(book.downloadProgress)}%`);\n                  const btn = a.button(\n                    () => `Cancel`,\n                    async () => {\n                      store.cancelDownload(book.id);\n                      await updateLabels();\n                      await viewStack.refresh();\n                    }\n                  );\n                } else if (!book.isDownloaded) {\n                  a.button(\n                    () => 'â¬‡ï¸ Download',\n                    async () => {\n                      store.startDownload(book.id);\n                      await updateLabels();\n                      await viewStack.refresh();\n                    }\n                  );\n                }\n\n                const favBtn = a.button(\n                  () => (book.isFavorite ? 'â¤ï¸ Unfavorite' : 'ðŸ¤ Favorite'),\n                  async () => {\n                    store.toggleFavorite(book.id);\n                    await updateLabels();\n                    await viewStack.refresh();\n                  }\n                );\n              });\n            });\n          },\n          trackBy: (book: Ebook) => book.id,\n        });\n    })\n    .when(() => selectedTab === 'library' && store.getBooks());\n\n  const readingContainer = a\n    .vbox(() => {\n      a.label(() => 'Currently Reading').withBold().withId('reading-title');\n\n      const currentId = store.getCurrentlyReading();\n      const currentBook = currentId ? store.getBookById(currentId) : null;\n\n      if (currentBook) {\n        a.label(() => currentBook.coverEmoji).withSize(48);\n        a.label(() => currentBook.title).withBold();\n        a.label(() => `by ${currentBook.author}`);\n        a.label(\n          () =>\n            `Progress: ${currentBook.currentPage}/${currentBook.totalPages} (${Math.round(currentBook.lastReadPosition)}%)`\n        );\n\n        a.vbox(() => {})\n          .withId('reading-progress')\n          .bindTo({\n            items: () => {\n              const stats = store.getReadingStats(currentBook.id);\n              return stats ? [stats] : [];\n            },\n            render: (stats: ReadingStats) => {\n              return a.hbox(() => {\n                a.label(() => `Read Time: ${stats.totalReadTime} min | Sessions: ${stats.sessionCount}`);\n              });\n            },\n            trackBy: (stats: ReadingStats) => stats.ebookId,\n          });\n\n        a.hbox(() => {\n          a.button(\n            () => '-10 Pages',\n            async () => {\n              const newPage = Math.max(0, currentBook.currentPage - 10);\n              store.updateReadingProgress(\n                currentBook.id,\n                newPage,\n                Math.round((newPage / currentBook.totalPages) * 100)\n              );\n              await updateLabels();\n              await viewStack.refresh();\n            }\n          );\n\n          a.button(\n            () => '+10 Pages',\n            async () => {\n              const newPage = Math.min(currentBook.totalPages, currentBook.currentPage + 10);\n              store.updateReadingProgress(\n                currentBook.id,\n                newPage,\n                Math.round((newPage / currentBook.totalPages) * 100)\n              );\n              await updateLabels();\n              await viewStack.refresh();\n            }\n          );\n        });\n\n        a.label(() => 'Bookmarks').withBold();\n        a.vbox(() => {})\n          .withId('bookmarks-list')\n          .bindTo({\n            items: () => store.getBookmarks(currentBook.id),\n            render: (bm: Bookmark) => {\n              return a.hbox(() => {\n                a.vbox(() => {\n                  a.label(() => `Page ${bm.pageNumber}: ${bm.note}`);\n                });\n                a.button(\n                  () => 'âœ•',\n                  async () => {\n                    store.deleteBookmark(bm.id);\n                    await updateLabels();\n                    await viewStack.refresh();\n                  }\n                );\n              });\n            },\n            trackBy: (bm: Bookmark) => bm.id,\n          });\n\n        a.button(\n          () => 'ðŸ“Œ Add Bookmark',\n          async () => {\n            const note = `Bookmark at page ${currentBook.currentPage}`;\n            store.addBookmark(currentBook.id, currentBook.currentPage, note);\n            await updateLabels();\n            await viewStack.refresh();\n          }\n        );\n      } else {\n        a.label(() => 'No book selected for reading');\n        a.button(\n          () => 'Select from Library',\n          async () => {\n            selectedTab = 'library';\n            await updateLabels();\n            await viewStack.refresh();\n          }\n        );\n      }\n    })\n    .when(() => selectedTab === 'reading');\n\n  const favoritesContainer = a\n    .vbox(() => {\n      a.label(() => 'Favorites').withBold().withId('favorites-title');\n\n      const favorites = store.getFavorites();\n      if (favorites.length === 0) {\n        a.label(() => 'No favorite books yet');\n      }\n\n      a.vbox(() => {})\n        .withId('favorites-list')\n        .bindTo({\n          items: () => store.getFavorites(),\n          render: (book: Ebook) => {\n            return a.hbox(() => {\n              a.label(() => book.coverEmoji);\n              a.vbox(() => {\n                a.label(() => book.title).withBold();\n                a.label(() => `by ${book.author}`);\n              });\n              a.button(\n                () => 'â¤ï¸',\n                async () => {\n                  store.toggleFavorite(book.id);\n                  await updateLabels();\n                  await viewStack.refresh();\n                }\n              );\n            });\n          },\n          trackBy: (book: Ebook) => book.id,\n        });\n    })\n    .when(() => selectedTab === 'favorites');\n\n  const downloadsContainer = a\n    .vbox(() => {\n      a.label(() => 'Downloads').withBold().withId('downloads-title');\n\n      const downloaded = store.getDownloadedBooks();\n      a.label(() => `${downloaded.length} downloaded books`);\n\n      a.vbox(() => {})\n        .withId('downloads-list')\n        .bindTo({\n          items: () => store.getDownloadedBooks(),\n          render: (book: Ebook) => {\n            return a.hbox(() => {\n              a.label(() => book.coverEmoji);\n              a.vbox(() => {\n                a.label(() => book.title).withBold();\n                a.label(() => `${book.fileSize} MB`);\n              });\n              a.button(\n                () => 'ðŸ“– Read',\n                async () => {\n                  store.setCurrentlyReading(book.id);\n                  selectedTab = 'reading';\n                  await updateLabels();\n                  await viewStack.refresh();\n                }\n              );\n            });\n          },\n          trackBy: (book: Ebook) => book.id,\n        });\n    })\n    .when(() => selectedTab === 'downloads');\n\n  const settingsContainer = a\n    .vbox(() => {\n      a.label(() => 'Settings').withBold().withId('settings-title');\n\n      const prefs = store.getPreferences();\n\n      a.label(() => 'ðŸŒ“ Theme');\n      a.hbox(() => {\n        a.button(\n          () => `${prefs.theme === 'light' ? 'â˜€ï¸ Light' : 'â˜€ï¸ Light'}`,\n          async () => {\n            store.setTheme('light');\n            await updateLabels();\n            await viewStack.refresh();\n          }\n        );\n        a.button(\n          () => `${prefs.theme === 'dark' ? 'ðŸŒ™ Dark' : 'ðŸŒ™ Dark'}`,\n          async () => {\n            store.setTheme('dark');\n            await updateLabels();\n            await viewStack.refresh();\n          }\n        );\n      });\n\n      a.label(() => 'ðŸ”¤ Font Size');\n      a.hbox(() => {\n        a.button(\n          () => `${prefs.fontSize === 'small' ? 'â–¼' : 'â–½'} Small`,\n          async () => {\n            store.setFontSize('small');\n            await updateLabels();\n            await viewStack.refresh();\n          }\n        );\n        a.button(\n          () => `${prefs.fontSize === 'medium' ? 'â–¼' : 'â–½'} Medium`,\n          async () => {\n            store.setFontSize('medium');\n            await updateLabels();\n            await viewStack.refresh();\n          }\n        );\n        a.button(\n          () => `${prefs.fontSize === 'large' ? 'â–¼' : 'â–½'} Large`,\n          async () => {\n            store.setFontSize('large');\n            await updateLabels();\n            await viewStack.refresh();\n          }\n        );\n      });\n\n      a.label(() => 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');\n      a.label(() => 'ðŸ“Š Statistics');\n      a.label(\n        () =>\n          `Total Books: ${store.getBookCount()} | Downloaded: ${store.getDownloadedCount()} | Favorites: ${store.getFavoriteCount()}`\n      );\n    })\n    .when(() => selectedTab === 'settings');\n\n  statsLabel = a.label(() => '');\n\n  const viewStack = a.vbox(() => {\n    userLabel = a\n      .label(() => 'ðŸ“š Ebook Reader')\n      .withId('user-label');\n    statsLabel = a.label(() => '').withId('stats-label');\n\n    a.hbox(() => {\n      a.button(\n        () => 'ðŸ“š Library',\n        async () => {\n          selectedTab = 'library';\n          await viewStack.refresh();\n        }\n      );\n      a.button(\n        () => 'ðŸ“– Reading',\n        async () => {\n          selectedTab = 'reading';\n          await viewStack.refresh();\n        }\n      );\n      a.button(\n        () => 'â¤ï¸ Favorites',\n        async () => {\n          selectedTab = 'favorites';\n          await viewStack.refresh();\n        }\n      );\n      a.button(\n        () => 'â¬‡ï¸ Downloads',\n        async () => {\n          selectedTab = 'downloads';\n          await viewStack.refresh();\n        }\n      );\n      a.button(\n        () => 'âš™ï¸ Settings',\n        async () => {\n          selectedTab = 'settings';\n          await viewStack.refresh();\n        }\n      );\n    });\n\n    libraryContainer;\n    readingContainer;\n    favoritesContainer;\n    downloadsContainer;\n    settingsContainer;\n  });\n\n  store.subscribe(async () => {\n    await updateLabels();\n  });\n\n  await updateLabels();\n  await viewStack.refresh();\n  return viewStack;\n}\n\nexport { EbookStore, Ebook, Bookmark, ReadingStats, ReadingPreferences };\n"]}