{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Food Truck Sample App - Tsyne Port\n *\n * @tsyne-app:name Food Truck\n * @tsyne-app:icon confirm\n * @tsyne-app:category Utilities\n * @tsyne-app:args (a: App) => void\n *\n * A food truck order management system showcasing:\n * - Order tracking and status management\n * - Sales analytics with popular menu items\n * - Weather information\n * - Responsive sidebar layout\n *\n * Portions copyright Apple Inc and portions copyright Paul Hammant 2025\n */\n\n// ============================================================================\n// DATA MODELS\n// ============================================================================\n\nexport interface MenuItem {\n  id: string;\n  name: string;\n  price: number;\n  salesCount: number;\n}\n\nexport interface Order {\n  id: string;\n  items: MenuItem[];\n  status: 'pending' | 'ready' | 'completed';\n  total: number;\n  timestamp: Date;\n}\n\nexport interface WeatherData {\n  location: string;\n  temperature: number;\n  condition: string;\n  icon: string;\n}\n\n// ============================================================================\n// STORE (Observable)\n// ============================================================================\n\ntype ChangeListener = () => void;\n\nexport class FoodTruckStore {\n  private menuItems: MenuItem[] = [\n    { id: 'burger', name: 'Burger', price: 12.99, salesCount: 45 },\n    { id: 'tacos', name: 'Tacos (3)', price: 9.99, salesCount: 62 },\n    { id: 'hotdog', name: 'Hot Dog', price: 7.99, salesCount: 38 },\n    { id: 'pizza', name: 'Pizza Slice', price: 5.99, salesCount: 71 },\n    { id: 'salad', name: 'Garden Salad', price: 8.99, salesCount: 22 },\n  ];\n\n  private orders: Order[] = [\n    {\n      id: 'order-001',\n      items: [this.menuItems[0], this.menuItems[1]],\n      status: 'pending',\n      total: 22.98,\n      timestamp: new Date(Date.now() - 300000),\n    },\n    {\n      id: 'order-002',\n      items: [this.menuItems[3], this.menuItems[3]],\n      status: 'ready',\n      total: 11.98,\n      timestamp: new Date(Date.now() - 120000),\n    },\n    {\n      id: 'order-003',\n      items: [this.menuItems[2]],\n      status: 'completed',\n      total: 7.99,\n      timestamp: new Date(Date.now() - 600000),\n    },\n  ];\n\n  private nextOrderId = 4;\n  private weather: WeatherData = {\n    location: 'Downtown Park',\n    temperature: 72,\n    condition: 'Sunny',\n    icon: 'â˜€ï¸',\n  };\n\n  private changeListeners: ChangeListener[] = [];\n\n  subscribe(listener: ChangeListener): () => void {\n    this.changeListeners.push(listener);\n    return () => {\n      this.changeListeners = this.changeListeners.filter((l) => l !== listener);\n    };\n  }\n\n  private notifyChange() {\n    this.changeListeners.forEach((listener) => listener());\n  }\n\n  // ========== Orders ==========\n  getOrders(): Order[] {\n    return [...this.orders];\n  }\n\n  getPendingOrders(): Order[] {\n    return this.orders.filter((o) => o.status === 'pending');\n  }\n\n  getReadyOrders(): Order[] {\n    return this.orders.filter((o) => o.status === 'ready');\n  }\n\n  getCompletedOrders(): Order[] {\n    return this.orders.filter((o) => o.status === 'completed');\n  }\n\n  addOrder(items: MenuItem[]): Order {\n    const total = items.reduce((sum, item) => sum + item.price, 0);\n    const order: Order = {\n      id: `order-${String(this.nextOrderId++).padStart(3, '0')}`,\n      items: [...items], // Defensive copy\n      status: 'pending',\n      total: Math.round(total * 100) / 100,\n      timestamp: new Date(),\n    };\n    this.orders.unshift(order);\n    this.notifyChange();\n    return order;\n  }\n\n  markOrderReady(orderId: string) {\n    const order = this.orders.find((o) => o.id === orderId);\n    if (order) {\n      order.status = 'ready';\n      this.notifyChange();\n    }\n  }\n\n  markOrderCompleted(orderId: string) {\n    const order = this.orders.find((o) => o.id === orderId);\n    if (order) {\n      order.status = 'completed';\n      this.notifyChange();\n    }\n  }\n\n  // ========== Menu Items ==========\n  getMenuItems(): MenuItem[] {\n    return [...this.menuItems];\n  }\n\n  getTopSalesItems(limit: number = 5): MenuItem[] {\n    return [...this.menuItems]\n      .sort((a, b) => b.salesCount - a.salesCount)\n      .slice(0, limit);\n  }\n\n  // ========== Weather ==========\n  getWeather(): WeatherData {\n    return { ...this.weather };\n  }\n\n  updateWeather(weather: Partial<WeatherData>) {\n    this.weather = { ...this.weather, ...weather };\n    this.notifyChange();\n  }\n\n  // ========== Analytics ==========\n  getTotalSales(): number {\n    return this.orders\n      .filter((o) => o.status !== 'completed')\n      .reduce((sum, o) => sum + o.total, 0);\n  }\n\n  getPendingCount(): number {\n    return this.getPendingOrders().length;\n  }\n\n  getReadyCount(): number {\n    return this.getReadyOrders().length;\n  }\n}\n\n// ============================================================================\n// VIEW BUILDER\n// ============================================================================\n\nexport function buildFoodTruckApp(a: any): void {\n  const store = new FoodTruckStore();\n  let selectedView: 'orders' | 'sales' | 'weather' = 'orders';\n\n  // Widget references for dynamic updates\n  let statusSummary: any;\n  let ordersContainer: any;\n  let salesContainer: any;\n  let weatherContainer: any;\n  let viewStack: any;\n\n  async function updateStatusSummary() {\n    if (statusSummary) {\n      await statusSummary.setText(\n        `Pending: ${store.getPendingCount()} | Ready: ${store.getReadyCount()}`\n      );\n    }\n  }\n\n  async function rebuildOrdersView() {\n    if (!ordersContainer) return;\n\n    // Clear and rebuild\n    const pendingOrders = store.getPendingOrders();\n    const readyOrders = store.getReadyOrders();\n\n    // Rebuild using bindTo for smart diffing\n    if (ordersContainer.boundList) {\n      ordersContainer.boundList.update();\n    }\n  }\n\n  a.window({ title: 'Food Truck Manager', width: 1100, height: 700 }, (win: any) => {\n    win.setContent(() => {\n      a.hbox(() => {\n        // ===== SIDEBAR =====\n        a.vbox(\n          () => {\n            a.label('ðŸšš Food Truck').withId('app-title');\n            a.separator();\n\n            a.button('Orders')\n              .withId('btn-orders')\n              .onClick(async () => {\n                selectedView = 'orders';\n                await showView('orders');\n              });\n\n            a.button('Sales')\n              .withId('btn-sales')\n              .onClick(async () => {\n                selectedView = 'sales';\n                await showView('sales');\n              });\n\n            a.button('Weather')\n              .withId('btn-weather')\n              .onClick(async () => {\n                selectedView = 'weather';\n                await showView('weather');\n              });\n\n            a.spacer();\n            a.label('Status', 'sidebar-label');\n            statusSummary = a.label('Pending: 0 | Ready: 0').withId('status-summary');\n          },\n          220,\n          true\n        );\n\n        // ===== MAIN CONTENT AREA =====\n        viewStack = a.vbox(() => {\n          // Orders View\n          ordersContainer = a.vbox(() => {\n            a.label('ðŸ“‹ Order Management').withId('orders-title');\n            a.separator();\n\n            a.hbox(() => {\n              a.label('Quick Add:', 'quick-add-label');\n              a.button('Burger')\n                .withId('add-burger')\n                .onClick(() => store.addOrder([store.getMenuItems()[0]]));\n              a.button('Tacos')\n                .withId('add-tacos')\n                .onClick(() => store.addOrder([store.getMenuItems()[1]]));\n              a.button('Pizza')\n                .withId('add-pizza')\n                .onClick(() => store.addOrder([store.getMenuItems()[3]]));\n              a.button('Random')\n                .withId('add-random')\n                .onClick(() => {\n                  const items = store.getMenuItems();\n                  const randomItem = items[Math.floor(Math.random() * items.length)];\n                  store.addOrder([randomItem]);\n                });\n            });\n\n            a.separator();\n\n            // Pending orders list\n            a.vbox(() => {\n              a.label('ðŸ”´ Pending Orders').withId('pending-section-title');\n            })\n              .bindTo({\n                items: () => store.getPendingOrders(),\n                empty: () => {\n                  a.label('No pending orders');\n                },\n                render: (order: Order) => {\n                  a.hbox(() => {\n                    a.vbox(() => {\n                      a.label(order.id).withId(`order-id-${order.id}`);\n                      a.label(`${order.items.map((i) => i.name).join(', ')}`).withId(\n                        `order-items-${order.id}`\n                      );\n                      a.label(`$${order.total.toFixed(2)}`).withId(\n                        `order-total-${order.id}`\n                      );\n                    });\n                    a.spacer();\n                    a.button('Mark Ready')\n                      .withId(`btn-ready-${order.id}`)\n                      .onClick(() => store.markOrderReady(order.id));\n                  });\n                },\n                trackBy: (order: Order) => order.id,\n              });\n\n            a.spacer();\n\n            // Ready orders list\n            a.vbox(() => {\n              a.label('ðŸŸ¢ Ready for Pickup').withId('ready-section-title');\n            })\n              .bindTo({\n                items: () => store.getReadyOrders(),\n                empty: () => {\n                  a.label('No ready orders');\n                },\n                render: (order: Order) => {\n                  a.hbox(() => {\n                    a.vbox(() => {\n                      a.label(order.id).withId(`order-id-${order.id}`);\n                      a.label(`${order.items.map((i) => i.name).join(', ')}`).withId(\n                        `order-items-${order.id}`\n                      );\n                      a.label(`$${order.total.toFixed(2)}`).withId(\n                        `order-total-${order.id}`\n                      );\n                    });\n                    a.spacer();\n                    a.button('Mark Complete')\n                      .withId(`btn-complete-${order.id}`)\n                      .onClick(() => store.markOrderCompleted(order.id));\n                  });\n                },\n                trackBy: (order: Order) => order.id,\n              });\n          }).when(() => selectedView === 'orders');\n\n          // Sales View\n          salesContainer = a.vbox(() => {\n            a.label('ðŸ“Š Sales Analytics').withId('sales-title');\n            a.separator();\n\n            let totalSalesLabel: any;\n            totalSalesLabel = a.label('').withId('total-sales');\n\n            a.label('Top Menu Items:').withId('top-items-label');\n\n            a.vbox(() => {\n              // Empty state handled by bindTo\n            })\n              .bindTo({\n                items: () => store.getTopSalesItems(5),\n                empty: () => {\n                  a.label('No sales data');\n                },\n                render: (item: MenuItem, index: number) => {\n                  const barLength = Math.ceil(item.salesCount / 5);\n                  const bar = 'â–ˆ'.repeat(barLength);\n                  a.hbox(() => {\n                    a.label(`${index + 1}. ${item.name.padEnd(18)}`, 'sales-name').withId(\n                      `sales-item-${item.id}`\n                    );\n                    a.label(`${bar} ${item.salesCount}`, 'sales-bar').withId(\n                      `sales-bar-${item.id}`\n                    );\n                  });\n                },\n                trackBy: (item: MenuItem) => item.id,\n              });\n          }).when(() => selectedView === 'sales');\n\n          // Weather View\n          weatherContainer = a.vbox(() => {\n            a.label('ðŸŒ¤ï¸ Location Weather').withId('weather-title');\n            a.separator();\n\n            let weatherLocation: any;\n            let weatherTemp: any;\n            let weatherCondition: any;\n\n            const weather = store.getWeather();\n\n            a.hbox(() => {\n              a.label(weather.icon, 'weather-icon-label');\n              a.vbox(() => {\n                weatherLocation = a.label(`ðŸ“ ${weather.location}`).withId('weather-location');\n                weatherTemp = a.label(`ðŸŒ¡ï¸ ${weather.temperature}Â°F`).withId(\n                  'weather-temperature'\n                );\n                weatherCondition = a.label(`â˜ï¸ ${weather.condition}`).withId(\n                  'weather-condition'\n                );\n              });\n            });\n\n            a.separator();\n\n            a.button('Update Weather')\n              .withId('btn-update-weather')\n              .onClick(() => {\n                const conditions = [\n                  { condition: 'Sunny', icon: 'â˜€ï¸', temp: 75 },\n                  { condition: 'Cloudy', icon: 'â˜ï¸', temp: 68 },\n                  { condition: 'Rainy', icon: 'ðŸŒ§ï¸', temp: 62 },\n                  { condition: 'Windy', icon: 'ðŸŒªï¸', temp: 65 },\n                ];\n                const newCond =\n                  conditions[Math.floor(Math.random() * conditions.length)];\n                store.updateWeather({\n                  temperature: newCond.temp,\n                  condition: newCond.condition,\n                  icon: newCond.icon,\n                });\n              });\n          }).when(() => selectedView === 'weather');\n        });\n      });\n    });\n\n    async function showView(view: string) {\n      await viewStack.refresh();\n      if (view === 'sales') {\n        await salesContainer.setText(\n          `Total Sales: $${store.getTotalSales().toFixed(2)}`\n        );\n      }\n    }\n\n    // Subscribe to store changes\n    store.subscribe(async () => {\n      await updateStatusSummary();\n      await viewStack.refresh();\n    });\n\n    // Initial setup\n    (async () => {\n      await updateStatusSummary();\n    })();\n\n    win.show();\n  });\n}\n\nexport default buildFoodTruckApp;\n"]}