{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Wikipedia - Tsyne Port\n *\n * @tsyne-app:name Wikipedia\n * @tsyne-app:icon book\n * @tsyne-app:category Reference\n * @tsyne-app:args (a: App) => void\n *\n * The free encyclopedia reader and discovery tool ported from Wikipedia iOS to Tsyne:\n * - Full-text search across millions of articles\n * - Multi-language support (300+ languages)\n * - Reading history tracking\n * - Saved articles and reading lists\n * - Featured content discovery\n * - Article tabs and organization\n * - Offline article storage\n *\n * Portions copyright (c) 2013â€“2025 Wikimedia Foundation and portions copyright Paul Hammant 2025\n */\n\n// ============================================================================\n// DATA MODELS\n// ============================================================================\n\nexport interface Article {\n  id: string;\n  title: string;\n  extract: string;\n  imageUrl: string;\n  language: string;\n  url: string;\n  pageId: number;\n  timestamp: Date;\n  views: number;\n  isStub: boolean;\n}\n\nexport interface ReadingListItem {\n  id: string;\n  articleTitle: string;\n  articleId: number;\n  language: string;\n  summary: string;\n  timestamp: Date;\n  imageUrl: string;\n}\n\nexport interface ReadingHistory {\n  id: string;\n  articleTitle: string;\n  articleId: number;\n  language: string;\n  viewedAt: Date;\n  timeSpent: number; // milliseconds\n  scrollPosition: number;\n}\n\nexport interface FeaturedContent {\n  id: string;\n  title: string;\n  type: 'featured-article' | 'picture-of-day' | 'in-the-news' | 'on-this-day';\n  description: string;\n  imageUrl: string;\n  language: string;\n  date: Date;\n}\n\nexport interface SearchSuggestion {\n  id: string;\n  title: string;\n  pageId: number;\n  views: number;\n}\n\nexport interface LanguageOption {\n  code: string;\n  name: string;\n  localName: string;\n  articles: number;\n}\n\n// ============================================================================\n// WIKIPEDIA STORE (Observable)\n// ============================================================================\n\ntype ChangeListener = () => void;\n\nexport class WikipediaStore {\n  private searchHistory: Article[] = [\n    {\n      id: 'article-001',\n      title: 'TypeScript',\n      extract: 'TypeScript is a free and open-source programming language developed by Microsoft.',\n      imageUrl: 'ðŸ“–',\n      language: 'en',\n      url: 'https://en.wikipedia.org/wiki/TypeScript',\n      pageId: 58034,\n      timestamp: new Date(Date.now() - 3600000),\n      views: 125000,\n      isStub: false,\n    },\n    {\n      id: 'article-002',\n      title: 'Open Source Software',\n      extract: 'Open-source software (OSS) is a type of computer software made available in source code form.',\n      imageUrl: 'ðŸ“š',\n      language: 'en',\n      url: 'https://en.wikipedia.org/wiki/Open-source_software',\n      pageId: 27620,\n      timestamp: new Date(Date.now() - 7200000),\n      views: 250000,\n      isStub: false,\n    },\n    {\n      id: 'article-003',\n      title: 'Wikipedia',\n      extract: 'Wikipedia is a free online encyclopedia created and edited by volunteers around the world.',\n      imageUrl: 'ðŸŒ',\n      language: 'en',\n      url: 'https://en.wikipedia.org/wiki/Wikipedia',\n      pageId: 171,\n      timestamp: new Date(Date.now() - 86400000),\n      views: 5000000,\n      isStub: false,\n    },\n  ];\n\n  private readingList: ReadingListItem[] = [\n    {\n      id: 'saved-001',\n      articleTitle: 'History of the Internet',\n      articleId: 12345,\n      language: 'en',\n      summary: 'The history of the internet and its development from ARPANET to the modern web.',\n      timestamp: new Date(Date.now() - 604800000),\n      imageUrl: 'ðŸ–¥ï¸',\n    },\n    {\n      id: 'saved-002',\n      articleTitle: 'Science and Technology',\n      articleId: 67890,\n      language: 'en',\n      summary: 'An overview of modern scientific and technological advancements.',\n      timestamp: new Date(Date.now() - 1209600000),\n      imageUrl: 'ðŸ”¬',\n    },\n  ];\n\n  private readingHistory: ReadingHistory[] = [\n    {\n      id: 'history-001',\n      articleTitle: 'Python (Programming Language)',\n      articleId: 23456,\n      language: 'en',\n      viewedAt: new Date(Date.now() - 1800000),\n      timeSpent: 600000,\n      scrollPosition: 0,\n    },\n    {\n      id: 'history-002',\n      articleTitle: 'Machine Learning',\n      articleId: 34567,\n      language: 'en',\n      viewedAt: new Date(Date.now() - 3600000),\n      timeSpent: 1200000,\n      scrollPosition: 50,\n    },\n    {\n      id: 'history-003',\n      articleTitle: 'Artificial Intelligence',\n      articleId: 45678,\n      language: 'en',\n      viewedAt: new Date(Date.now() - 7200000),\n      timeSpent: 1800000,\n      scrollPosition: 30,\n    },\n  ];\n\n  private featuredContent: FeaturedContent[] = [\n    {\n      id: 'featured-001',\n      title: 'Great Barrier Reef',\n      type: 'featured-article',\n      description: 'The largest coral reef system in the world located off the coast of Queensland, Australia.',\n      imageUrl: 'ðŸª¸',\n      language: 'en',\n      date: new Date(Date.now() - 86400000),\n    },\n    {\n      id: 'featured-002',\n      title: 'Moon',\n      type: 'picture-of-day',\n      description: 'The natural satellite of Earth, our closest celestial neighbor.',\n      imageUrl: 'ðŸŒ™',\n      language: 'en',\n      date: new Date(Date.now() - 172800000),\n    },\n    {\n      id: 'featured-003',\n      title: '2025 Nobel Prizes Announced',\n      type: 'in-the-news',\n      description: 'The 2025 Nobel Prize winners have been announced across all categories.',\n      imageUrl: 'ðŸ†',\n      language: 'en',\n      date: new Date(Date.now() - 259200000),\n    },\n    {\n      id: 'featured-004',\n      title: 'On This Day: First Moon Landing',\n      type: 'on-this-day',\n      description: 'July 20, 1969: Apollo 11 astronauts land on the Moon.',\n      imageUrl: 'ðŸš€',\n      language: 'en',\n      date: new Date(Date.now()),\n    },\n  ];\n\n  private languages: LanguageOption[] = [\n    { code: 'en', name: 'English', localName: 'English', articles: 6800000 },\n    { code: 'es', name: 'Spanish', localName: 'EspaÃ±ol', articles: 1800000 },\n    { code: 'fr', name: 'French', localName: 'FranÃ§ais', articles: 2500000 },\n    { code: 'de', name: 'German', localName: 'Deutsch', articles: 2600000 },\n    { code: 'zh', name: 'Chinese', localName: 'ä¸­æ–‡', articles: 1200000 },\n    { code: 'ja', name: 'Japanese', localName: 'æ—¥æœ¬èªž', articles: 1300000 },\n    { code: 'ar', name: 'Arabic', localName: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', articles: 1100000 },\n    { code: 'ru', name: 'Russian', localName: 'Ð ÑƒÑÑÐºÐ¸Ð¹', articles: 1700000 },\n  ];\n\n  private currentLanguage: LanguageOption = this.languages[0];\n  private nextArticleId = 4;\n  private nextSavedId = 3;\n  private nextHistoryId = 4;\n  private changeListeners: ChangeListener[] = [];\n\n  subscribe(listener: ChangeListener): () => void {\n    this.changeListeners.push(listener);\n    return () => {\n      this.changeListeners = this.changeListeners.filter((l) => l !== listener);\n    };\n  }\n\n  private notifyChange() {\n    this.changeListeners.forEach((listener) => listener());\n  }\n\n  // ========== Search ==========\n  search(query: string): SearchSuggestion[] {\n    // Simulate search results\n    const results: SearchSuggestion[] = [];\n    const mockArticles = [\n      { title: `${query} (Concept)`, views: Math.random() * 1000000 },\n      { title: `${query} (History)`, views: Math.random() * 1000000 },\n      { title: `${query} (Technology)`, views: Math.random() * 1000000 },\n      { title: `History of ${query}`, views: Math.random() * 1000000 },\n      { title: `${query} in Modern Times`, views: Math.random() * 1000000 },\n    ];\n\n    for (let i = 0; i < mockArticles.length; i++) {\n      results.push({\n        id: `suggestion-${i}`,\n        title: mockArticles[i].title,\n        pageId: 100000 + i,\n        views: Math.round(mockArticles[i].views),\n      });\n    }\n    return results;\n  }\n\n  viewArticle(suggestion: SearchSuggestion): Article {\n    const article: Article = {\n      id: `article-${String(this.nextArticleId++).padStart(3, '0')}`,\n      title: suggestion.title,\n      extract: `This is an article about ${suggestion.title}. ${suggestion.title} is a notable topic covered in Wikipedia with approximately ${suggestion.views} views.`,\n      imageUrl: 'ðŸ“„',\n      language: this.currentLanguage.code,\n      url: `https://${this.currentLanguage.code}.wikipedia.org/wiki/${suggestion.title.replace(/ /g, '_')}`,\n      pageId: suggestion.pageId,\n      timestamp: new Date(),\n      views: suggestion.views,\n      isStub: Math.random() > 0.8,\n    };\n    this.searchHistory.unshift(article);\n    this.addToReadingHistory(article.title, article.pageId);\n    this.notifyChange();\n    return article;\n  }\n\n  getSearchHistory(): Article[] {\n    return [...this.searchHistory];\n  }\n\n  clearSearchHistory(): void {\n    this.searchHistory = [];\n    this.notifyChange();\n  }\n\n  deleteFromSearchHistory(articleId: string): boolean {\n    const initialLength = this.searchHistory.length;\n    this.searchHistory = this.searchHistory.filter((a) => a.id !== articleId);\n    if (this.searchHistory.length < initialLength) {\n      this.notifyChange();\n      return true;\n    }\n    return false;\n  }\n\n  // ========== Reading List (Saved Articles) ==========\n  getReadingList(): ReadingListItem[] {\n    return [...this.readingList];\n  }\n\n  saveArticle(article: Article): ReadingListItem {\n    const item: ReadingListItem = {\n      id: `saved-${String(this.nextSavedId++).padStart(3, '0')}`,\n      articleTitle: article.title,\n      articleId: article.pageId,\n      language: article.language,\n      summary: article.extract,\n      timestamp: new Date(),\n      imageUrl: article.imageUrl,\n    };\n    this.readingList.unshift(item);\n    this.notifyChange();\n    return item;\n  }\n\n  removeSavedArticle(itemId: string): boolean {\n    const initialLength = this.readingList.length;\n    this.readingList = this.readingList.filter((item) => item.id !== itemId);\n    if (this.readingList.length < initialLength) {\n      this.notifyChange();\n      return true;\n    }\n    return false;\n  }\n\n  isSavedArticle(articleId: number): boolean {\n    return this.readingList.some((item) => item.articleId === articleId);\n  }\n\n  getReadingListByLanguage(language: string): ReadingListItem[] {\n    return this.readingList.filter((item) => item.language === language);\n  }\n\n  // ========== Reading History ==========\n  getReadingHistory(): ReadingHistory[] {\n    return [...this.readingHistory];\n  }\n\n  private addToReadingHistory(title: string, pageId: number): void {\n    const history: ReadingHistory = {\n      id: `history-${String(this.nextHistoryId++).padStart(3, '0')}`,\n      articleTitle: title,\n      articleId: pageId,\n      language: this.currentLanguage.code,\n      viewedAt: new Date(),\n      timeSpent: Math.floor(Math.random() * 3600000),\n      scrollPosition: Math.floor(Math.random() * 100),\n    };\n    this.readingHistory.unshift(history);\n  }\n\n  clearReadingHistory(): void {\n    this.readingHistory = [];\n    this.notifyChange();\n  }\n\n  deleteFromReadingHistory(historyId: string): boolean {\n    const initialLength = this.readingHistory.length;\n    this.readingHistory = this.readingHistory.filter((h) => h.id !== historyId);\n    if (this.readingHistory.length < initialLength) {\n      this.notifyChange();\n      return true;\n    }\n    return false;\n  }\n\n  getReadingStats(): { totalArticles: number; totalTimeSpent: number; averageTimePerArticle: number } {\n    const totalTimeSpent = this.readingHistory.reduce((sum, h) => sum + h.timeSpent, 0);\n    return {\n      totalArticles: this.readingHistory.length,\n      totalTimeSpent,\n      averageTimePerArticle: this.readingHistory.length > 0 ? totalTimeSpent / this.readingHistory.length : 0,\n    };\n  }\n\n  // ========== Featured Content ==========\n  getFeaturedContent(): FeaturedContent[] {\n    return [...this.featuredContent];\n  }\n\n  getFeaturedContentByType(type: FeaturedContent['type']): FeaturedContent[] {\n    return this.featuredContent.filter((c) => c.type === type);\n  }\n\n  // ========== Languages ==========\n  getLanguages(): LanguageOption[] {\n    return [...this.languages];\n  }\n\n  getCurrentLanguage(): LanguageOption {\n    return { ...this.currentLanguage };\n  }\n\n  setCurrentLanguage(languageCode: string): boolean {\n    const language = this.languages.find((l) => l.code === languageCode);\n    if (language) {\n      this.currentLanguage = language;\n      this.notifyChange();\n      return true;\n    }\n    return false;\n  }\n\n  getTopReadArticles(limit: number = 10): Article[] {\n    return [...this.searchHistory].sort((a, b) => b.views - a.views).slice(0, limit);\n  }\n\n  // ========== Statistics ==========\n  getTotalArticlesViewed(): number {\n    return this.searchHistory.length;\n  }\n\n  getArticleCount(language?: string): number {\n    if (language) {\n      return this.languages.find((l) => l.code === language)?.articles || 0;\n    }\n    return this.currentLanguage.articles;\n  }\n\n  getDaysActive(): number {\n    if (this.readingHistory.length === 0) return 0;\n    const oldest = this.readingHistory[this.readingHistory.length - 1].viewedAt.getTime();\n    const newest = this.readingHistory[0].viewedAt.getTime();\n    return Math.ceil((newest - oldest) / (1000 * 60 * 60 * 24)) + 1;\n  }\n\n  getContributionScore(): number {\n    const stats = this.getReadingStats();\n    const saveCount = this.readingList.length;\n    const historyCount = this.readingHistory.length;\n    return Math.round((historyCount * 10 + saveCount * 25) / 100);\n  }\n}\n\n// ============================================================================\n// APP BUILD FUNCTION\n// ============================================================================\n\nexport function buildWikipediaApp(a: any): void {\n  const store = new WikipediaStore();\n\n  let selectedTab = 'search';\n  let searchInput: any;\n  let searchInputValue = '';\n  let viewStack: any;\n  let statsLabel: any;\n  let languageLabel: any;\n\n  let searchContainer: any;\n  let exploreContainer: any;\n  let savedContainer: any;\n  let historyContainer: any;\n\n  const updateLabels = async () => {\n    const stats = store.getReadingStats();\n    const lang = store.getCurrentLanguage();\n    if (statsLabel) {\n      const hours = Math.floor(stats.totalTimeSpent / 3600000);\n      const mins = Math.floor((stats.totalTimeSpent % 3600000) / 60000);\n      await statsLabel.setText(`ðŸ“– Articles Viewed: ${stats.totalArticles} | Time Spent: ${hours}h ${mins}m`);\n    }\n    if (languageLabel) {\n      await languageLabel.setText(`ðŸŒ Language: ${lang.name} (${lang.articles.toLocaleString()} articles)`);\n    }\n  };\n\n  a.window({ title: 'Wikipedia - The Free Encyclopedia' }, (win: any) => {\n    win.setContent(() => {\n      a.vbox(() => {\n        // Header\n        a.hbox(() => {\n          a.label('ðŸ“– Wikipedia').withId('app-title').withBold();\n          a.spacer();\n          languageLabel = a.label('ðŸŒ Language: English').withId('language-label');\n        });\n\n        a.hbox(() => {\n          a.spacer();\n          statsLabel = a.label('ðŸ“– Articles Viewed: 0').withId('stats-label');\n        });\n\n        // Search Bar\n        a.hbox(() => {\n          searchInput = a.textEntry('').withPlaceholder('ðŸ” Search Wikipedia...').withId('search-input');\n          searchInput.onChange(async (value: string) => {\n            searchInputValue = value;\n          });\n\n          a.button('Search').onClick(async () => {\n            if (searchInputValue.trim()) {\n              const results = store.search(searchInputValue);\n              if (results.length > 0) {\n                store.viewArticle(results[0]);\n                searchInputValue = '';\n                if (searchInput) {\n                  await searchInput.setText('');\n                }\n                await updateLabels();\n                await viewStack.refresh();\n              }\n            }\n          });\n        });\n\n        // Tabs\n        a.hbox(() => {\n          a.button('ðŸ” Search').onClick(async () => {\n            selectedTab = 'search';\n            await viewStack.refresh();\n          });\n\n          a.button('âœ¨ Explore').onClick(async () => {\n            selectedTab = 'explore';\n            await viewStack.refresh();\n          });\n\n          a.button('ðŸ’¾ Saved').onClick(async () => {\n            selectedTab = 'saved';\n            await viewStack.refresh();\n          });\n\n          a.button('ðŸ“œ History').onClick(async () => {\n            selectedTab = 'history';\n            await viewStack.refresh();\n          });\n        });\n\n        a.separator();\n\n        // Content\n        viewStack = a.vbox(() => {\n          // Search Tab\n          searchContainer = a.vbox(() => {\n            a.label('ðŸ” Search Results').withId('search-title').withBold();\n\n            a.hbox(() => {\n              a.button('ðŸ—‘ï¸ Clear').onClick(async () => {\n                store.clearSearchHistory();\n                await updateLabels();\n                await viewStack.refresh();\n              });\n\n              a.spacer();\n\n              a.label(`Recent: ${store.getTotalArticlesViewed()} articles`);\n            });\n\n            a.vbox(() => {})\n              .bindTo({\n                items: () => store.getSearchHistory().slice(0, 20),\n                render: (article: Article) => {\n                  a.hbox(() => {\n                    a.vbox(() => {\n                      a.label(`${article.imageUrl} ${article.title}`).withBold();\n                      a.label(`Views: ${article.views.toLocaleString()} | ${new Date(article.timestamp).toLocaleDateString()}`).withSize(\n                        0.85\n                      );\n                      a.label(`${article.extract.substring(0, 80)}...`).withSize(0.8);\n                    });\n                    a.spacer();\n                    a.button('Save').onClick(async () => {\n                      store.saveArticle(article);\n                      await viewStack.refresh();\n                    });\n                    a.button('âœ•').onClick(async () => {\n                      store.deleteFromSearchHistory(article.id);\n                      await viewStack.refresh();\n                    });\n                  }).withPadding(5);\n                },\n                trackBy: (article: Article) => article.id,\n              });\n          })\n            .withPadding(10)\n            .when(() => selectedTab === 'search');\n\n          // Explore Tab\n          exploreContainer = a.vbox(() => {\n            a.label('âœ¨ Featured Content').withId('explore-title').withBold();\n\n            a.hbox(() => {\n              a.spacer();\n              a.label(`Total Articles: ${store.getArticleCount().toLocaleString()}`);\n            });\n\n            a.vbox(() => {})\n              .bindTo({\n                items: () => store.getFeaturedContent(),\n                render: (content: FeaturedContent) => {\n                  a.hbox(() => {\n                    a.vbox(() => {\n                      a.label(`${content.imageUrl} ${content.title}`).withBold();\n                      a.label(`[${content.type.replace('-', ' ').toUpperCase()}]`).withSize(0.8);\n                      a.label(`${content.description}`).withSize(0.85);\n                    });\n                  }).withPadding(5);\n                },\n                trackBy: (content: FeaturedContent) => content.id,\n              });\n          })\n            .withPadding(10)\n            .when(() => selectedTab === 'explore');\n\n          // Saved Tab\n          savedContainer = a.vbox(() => {\n            a.label('ðŸ’¾ Saved Articles').withId('saved-title').withBold();\n\n            a.hbox(() => {\n              a.spacer();\n              a.label(`Total: ${store.getReadingList().length} saved`);\n            });\n\n            a.vbox(() => {})\n              .bindTo({\n                items: () => store.getReadingList(),\n                render: (item: ReadingListItem) => {\n                  a.hbox(() => {\n                    a.vbox(() => {\n                      a.label(`${item.imageUrl} ${item.articleTitle}`).withBold();\n                      a.label(`Saved: ${new Date(item.timestamp).toLocaleDateString()}`).withSize(0.85);\n                      a.label(`${item.summary.substring(0, 70)}...`).withSize(0.8);\n                    });\n                    a.spacer();\n                    a.button('âœ•').onClick(async () => {\n                      store.removeSavedArticle(item.id);\n                      await viewStack.refresh();\n                    });\n                  }).withPadding(5);\n                },\n                trackBy: (item: ReadingListItem) => item.id,\n              });\n          })\n            .withPadding(10)\n            .when(() => selectedTab === 'saved');\n\n          // History Tab\n          historyContainer = a.vbox(() => {\n            a.label('ðŸ“œ Reading History').withId('history-title').withBold();\n\n            const stats = store.getReadingStats();\n            a.hbox(() => {\n              a.vbox(() => {\n                a.label('ðŸ“Š STATS').withBold();\n                a.label(`Articles: ${stats.totalArticles}`);\n                a.label(`Days Active: ${store.getDaysActive()}`);\n                a.label(`Score: ${store.getContributionScore()}`);\n              });\n\n              a.spacer();\n\n              a.vbox(() => {\n                a.label('â±ï¸ TIME SPENT').withBold();\n                const hours = Math.floor(stats.totalTimeSpent / 3600000);\n                const mins = Math.floor((stats.totalTimeSpent % 3600000) / 60000);\n                a.label(`Total: ${hours}h ${mins}m`);\n                const avgMins = Math.floor(stats.averageTimePerArticle / 60000);\n                a.label(`Average: ${avgMins}m per article`);\n              });\n            });\n\n            a.separator();\n\n            a.label('ðŸ“ˆ RECENT READS').withBold();\n            a.vbox(() => {})\n              .bindTo({\n                items: () => store.getReadingHistory().slice(0, 15),\n                render: (history: ReadingHistory) => {\n                  const mins = Math.floor(history.timeSpent / 60000);\n                  a.hbox(() => {\n                    a.vbox(() => {\n                      a.label(`${history.articleTitle}`).withBold();\n                      a.label(`${mins}m read | ${new Date(history.viewedAt).toLocaleTimeString()}`).withSize(0.85);\n                    });\n                    a.spacer();\n                    a.button('âœ•').onClick(async () => {\n                      store.deleteFromReadingHistory(history.id);\n                      await viewStack.refresh();\n                    });\n                  }).withPadding(5);\n                },\n                trackBy: (history: ReadingHistory) => history.id,\n              });\n\n            a.hbox(() => {\n              a.spacer();\n              a.button('ðŸ—‘ï¸ Clear History').onClick(async () => {\n                store.clearReadingHistory();\n                await updateLabels();\n                await viewStack.refresh();\n              });\n            });\n          })\n            .withPadding(10)\n            .when(() => selectedTab === 'history');\n        });\n      });\n    });\n\n    // Observable subscription\n    store.subscribe(async () => {\n      await updateLabels();\n      await viewStack.refresh();\n    });\n\n    updateLabels();\n  });\n}\n"]}